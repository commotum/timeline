                                                  Llama-3 original                   Llama-3 w/o semantic vector               Llama-3 w/o positional vector             Llama-3 w/o positional basis
                                             0                                         0                                         0                                         0
                                                                           2                                         2                                         1.5                                       1.5
                                             10                                       10                                        10                             2.0        10                             2.0
                                                                           3                                         4                                                                                   2.5
                                             20                            4          20                                        20                             2.5        20
                                                                                                                     6                                         3.0                                       3.0
                                                                           5                                                                                                                             3.5
                                             30                            6          30                                        30                             3.5        30
                                                                                                                     8                                         4.0                                       4.0
                                             40                            7          40                                        40                                        40                             4.5
                                                                           8                                         10                                        4.5                                       5.0
                                               0   10   20   30  40                      0   10   20  30   40                     0    10  20   30   40                     0    10  20   30   40
                                                  Qwen1.5 original                   Qwen1.5 w/o semantic vector              Qwen1.5 w/o positional vector              Qwen1.5 w/o positional basis
                                             0                                         0                                         0                                         0
                                                                                                                    0                                         0                                         0
                                             10                            2          10                                        10                                        10
                                                                           3                                         2                                         1                                         1
                                             20                            4          20                             4          20                                        20                             2
                                                                           5                                                                                   2
                                             30                            6          30                             6          30                             3          30                             3
                                             40                            7          40                             8          40                                        40                             4
                                                                           8                                                                                   4
                                               0   10   20   30  40                      0   10   20  30   40                     0    10  20   30   40                     0    10  20   30   40
                                             0        Yi original                      0 Yi w/o semantic vector                  0 Yi w/o positional vector                0 Yi w/o positional basis
                                                                           2                                         2                                         1.5                                       1.5
                                             10                                       10                             3          10                             2.0        10                             2.0
                                                                           3                                         4                                         2.5                                       2.5
                                             20                            4          20                                        20                                        20                             3.0
                                                                                                                     5                                         3.0
                                             30                            5          30                             6          30                             3.5        30                             3.5
                                                                                                                     7                                         4.0                                       4.0
                                             40                            6          40                             8          40                                        40                             4.5
                                                                                                                                                               4.5                                       5.0
                                                                           7
                                               0   10   20   30  40                      0   10   20  30   40                     0    10  20   30   40                     0    10  20   30   40
                                                  TL-NoPE original                   TL-NoPE w/o semantic vector               TL-NoPE w/o positional vector             TL-NoPE w/o positional basis
                                             0                                         0                                         0                                         0
                                                                          0                                         0                                         0                                         0
                                             10                            1          10                             1          10                                        10                             1
                                                                                                                                                               1
                                             20                            2          20                             2          20                                        20
                                                                                                                                                               2                                         2
                                                                           3                                         3
                                             30                            4          30                             4          30                             3          30                             3
                                             40                            5          40                             5          40                             4          40                             4
                                               0   10   20   30  40                      0   10   20  30   40                     0    10  20   30   40                     0    10  20   30   40
                                              Figure 11: Logarithmic attention maps of Llama-3-8B, Qwen1.5-7B, Yi-9B, and new TL-NoPE.
                                            sinks disappear, and long-term decay is observed, which is consistent with the behavior seen in
                                            TinyLlama.
                                            F.3      Effect of Positional Vectors Beyond Context Window
                                                        Table 7: Resuls of PPL and change of positional vectors during direct extrapolation.
                                                                  model                       context window(C)                   PPL(C)           PPL(2C)            Simi(2C)
                                                                  Llama-3-8B                              8192                       6.74            >1000                0.30
                                                                  Yi-9B                                   4096                       7.08            102.58               0.24
                                                                  TL-NoPE-new                             2048                      11.75            351.49               0.71
                                                              Table 8: Change of attention sinks and output logits beyond context window.
                                                    model                        context window (C)                        property                 0∼C          C∼1.5C            1.5C∼2C
                                                    Llama-3-8B                               8192                      attention sink              0.467             0.1               0.005
                                                                                                                     logits similarity                 1             0.9                0.88
                                                    Yi-9B                                    4096                      attention sink               0.68           0.344               0.056
                                                                                                                     logits similarity                 1             0.98               0.97
                                                    TL-NoPE-new                              2048                      attention sink               0.17            0.02              0.0006
                                                                                                                     logits similarity                 1            0.97                 0.9
                                            Weinvestigate the behavior of positional vectors under direct extrapolation scenarios. Specifically,
                                            we evaluate LLMs on sequences twice the length of their maximum context window, comparing
                                            the variations in PPL and positional vectors. The results, as shown in Table 7, indicate a sharp
                                                                                                                         19

               GECCO’21,July10–14,2021, Lille, France                                                                         ThomasHelmuthandPeterKelly
               programsthatoverﬁtthetrainingdata,suchasbymemorizingthe                 better results on multi-outputproblems when using one outputin-
               correct output to each input, as solutions.                             structionperoutput.Theseoutputinstructionsareincludedinthe
                                                                                       instruction set for such problems and will always appear in solu-
               7 EXPERIMENTALMETHODSANDSYSTEM                                          tion programs. An example of this is for Coin Sums, which has 4
                    PARAMETERS                                                         outputs. We provide four corresponding output instructions, each
               In this section we will discuss the system-speciﬁc parameters and       of which takes the top integer from the integer stack and stores it
               choices that mustbedecidedinordertousePSB2.Incontrastwith               in a write-only register for that output; further calls to an output
               the previous section on general considerations, the choices here        instruction will overwrite this output register.
               may diﬀer considerably for diﬀerent program synthesis systems.            In order to deﬁne each problem for GP, we not only need the
               For our experiments, we used PushGP; we will describe in general        inputsandcorrectoutputsforeachproblem,butalsohowtocalcu-
               the decisions that must be made and give our speciﬁc choices.           latetheerrorfunctionbasedonthecorrectoutputandaprogram’s
                  PushGP evolves programs in the language Push, a stack-based          output. Here we describe the error functions we employed in our
               programming language built speciﬁcally for use in genetic pro-          experiments, whichwerecommendforanyGPsystemimplement-
               gramming [51, 52]. Every data type has its own stack, and each          ing PSB2; other non-GP program synthesis systems may require
               Push instruction acts by pushing and popping various elements           entirely diﬀerent metrics. For each output data type, we use the
               on and oﬀ the stacks. The output of each problem is typically the       following standard error functions for problems outputting that
               top element on a particular stack. The interpreter executes pro-        data type:
               gramsthatarethemselves placedonanexec stack,allowing exec                   • Integer or ﬂoat: absolute value of the diﬀerence between
               instructions to manipulate control ﬂow as well as the program it-             program outputand correct output.
               self as it runs. We provide a reference implementation in Clojure           • Boolean: 0 for correct and 1 for incorrect output.
               of the PushGP system used to produce our results, which includes            • String: Levenshtein string edit distance between the pro-
                                     8                                                       gramoutputandcorrectoutput.
               eachprobleminPSB2. Thisreferenceimplementationisthesame
               implementation of PushGP used in recent research using PSB1,                • Vectorof integers: add the diﬀerence in length between the
               e.g. [14, 15, 18].                                                            program’s output vector and the correct vector times 1000
                  Wediscussthegeneral design of programsynthesis instruction                 to the absolute diﬀerence between each integer and the cor-
               sets in Section 6. For our PushGP experiments, we use the general             responding integer in the correct vector.
               process recommended in PSB1, where, for each problem, we iden-          Theonlyexception is for the Indices of Substring problem, where
               tify which data types (corresponding to stacks) are relevant and        weusedLevenshteindistancetocomparevectorsofintegers,since
               include all implemented instructions that use those stacks [17]. In     it makes more sense for that problem. In PushGP, some evolving
               Table 2, we present the data types we chose to include for each         programs will not return values of a program’s output data type;
               problem, and the total number of instructions in the instruction        we give a penalty error value speciﬁc to the problem when this
               set. These large instruction sets contain a wide range of general-      occurs.
               purposePushinstructions,includingsomenewinstructionsimple-                Ashasbeen shown to be eﬀective at improving generalization,
               mented since PSB1, avoiding the cherry-picking of clearly useful        we use an automatic simpliﬁcation procedure on every evolved
               instructions. See the reference implementation for a complete list-     Push program that passes all of the training cases before testing
               ing of instructions.                                                    it on the test set [14].
                  Research utilizing PSB1 in using transfer-learned instruction          Unlike for PSB1, we aimed to keep all system-speciﬁc param-
               sets showed that the composition of the instruction set matters a       eters constant between problems, increasing ease of use for both
               great deal to problem-solving performance [16]. While we do not         implementation and reporting of results. These parameters were
               use fully transfer-learned instruction sets here, we do make use of     chosenbasedonpriorexperienceandreasonableperformance;we
               one simple take-away: that including larger proportions of input        leave optimizing parameter settings as an open research question.
               instructions and constants/ERCsimproves performance. An expla-          Other systems may chooseto use diﬀerent system-speciﬁc param-
               nation of this result is that most Push instructions decrease stack     eters.
               sizes by consuming arguments and producingfewer returnvalues,             Our PushGP system uses linear Plush genomes that are initial-
               so increasing inputs and constants creates more data on which in-       ized by generating lists of random instructions from the instruc-
               structionscan act.Weboostthepresenceofinputinstructionsand              tion set [21]. We list the important parameters used in our experi-
               constants in the instruction set, making input instructions ﬁll 15%     ments below:
               of the instruction set and constants/ERCs ﬁll 5% of the instruc-
               tion set. The additional input instructions are evenly distributed          • Maximuminitial genome size: 250 genes
               between each input for problems with multiple inputs, and con-              • Maximumgenomesize:500genes
               stants/ERCs are similarly evenly distributed for each listed in the         • Population size: 1000
               last column of Table 2.                                                     • Maximumgenerations perrun: 300
                  Forproblemswithmultipleoutputs,diﬀerentsynthesissystems                  • MaximumstepsofthePushinterpreterwhenexecutingone
               will need to make choices speciﬁc to the language of the synthe-              program: 2000
               sizedprograms.InitialexperimentsinPushGPshowthatitachieves                  • Parent selection: lexicase selection [20]
                                                                                           • Geneticoperator:UniformMutationwithAdditionsandDele-
               8https://github.com/thelmuth/Clojush/releases/tag/psb2-v1.0                   tions (UMAD), used to make 100% of children [15].

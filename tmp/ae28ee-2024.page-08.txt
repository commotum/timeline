                                           Published as a conference paper at ICLR 2024
                                           5.1      AQUALITATIVE ANALYSIS OF SWE-LLAMA GENERATIONS
                                           Weselect11generationsfromSWE-LlamaandClaude2tobetterunderstandthequalityofthetask
                                           and generated patches under the “oracle” retrieval setting. Here we discuss an example from SWE-
                                           Llamaandouroverall findings, with in-depth analyses for other examples shown in Appendix F.
                                             Model Input                                                  Gold Patch
                                                                                                           sphinx/ext/napoleon/docstring.py
                                                                                                               def _parse_other_parameters_section(self, section: str) -> List[str]: 
                                             You will be provided with a partial code base and an issue

                                                                                                          -        return self._format_fields(_('Other Parameters'), self._consume_fields()) 
                                             statement explaining a problem to resolve.
                                                                                                          +        if self._config.napoleon_use_param: 
                                                                                                          +            # Allow to declare multiple parameters at once (ex: x, y: int) 
                                                                                                          +            fields = self._consume_fields(multiple=True) 
                                             napoleon_use_param should also affect "other 
                                                                                                          +            return self._format_docutils_params(fields) 
                                             parameters" section Subject: napoleon_use_param 
                                                                                                          +        else: 
                                             should also affect "other parameters" section
                                                                                                          +            fields = self._consume_fields() 
                                             ### Problem

                                                                                                          +            return self._format_fields(_('Other Parameters'), fields)
                                             Currently, napoleon always renders the Other parameters 
                                             section as if napoleon_use_param was False, see source
                                                                                                          Generated Patch
                                             def _parse_other_parameters_section(self, se...

                                                                                                           sphinx/ext/napoleon/docstring.py
                                                 # type: (unicode) -> List[unicode]

                                                                                                               def _parse_other_parameters_section(self, section: str) -> List[str]: 
                                                 return self._format_fields(_('Other Para..
8
                                                                                                          -        return self._format_fields(_('Other Parameters'), self._consume_fields()) 
                                                                                                          +        return self._format_docutils_params(self._consume_fields())
                                             def _parse_parameters_section(self, section):

                                                 # type: (unicode) -> List[unicode]

                                                                                                          Generated Patch Test Results
                                                 fields = self._consume_fields()

                                                                                                           PASSED
  NumpyDocstringTest (test_yield_types) 
                                                 if self._config.napoleon_use_param: ...
                                                                                                           PASSED
  TestNumpyDocstring (test_escape_args_and_kwargs 1) 
                                                                                                           PASSED
  TestNumpyDocstring (test_escape_args_and_kwargs 2)

                                                                                                           PASSED
  TestNumpyDocstring (test_escape_args_and_kwargs 3) 
                                                                                                           PASSED
  TestNumpyDocstring (test_pep526_annotations) 
                                                                                                           FAILED
  NumpyDocstringTest (test_parameters_with_class_reference) 
                                                                                                           FAILED TestNumpyDocstring (test_token_type_invalid)
                                                                                                           ===== 2 failed, 45 passed, 8 warnings in 5.16s =====
                                           Figure 6: We show an example of an formatted task instance, a model prediction, and the testing
                                           framework logs. In the patches, red highlights are deletions. Green highlights are additions.
                                           We’ll consider the task instance sphinx-doc sphinx-8713 from the Sphinx documenta-
                                           tion generator, shown in Figure 6. The issue states that the napoleon extension of Sphinx is
                                           not properly formatting the documentation keyword “Other Parameters” when the config setting
                                           napoleon.use_param is set to True. The issue text further provides a detailed code snippet of
                                           where the problematic source code is suspected to be, as well as some code examples for reproduc-
                                           ing the error and additional information related to package versions. For this particular instance, the
                                           model did not resolve the task, failing to pass some of the tests resolved by the gold solution.
                                           In the “oracle” retrieval setting, the model input provides this issue text along with some instruc-
                                           tions, the full contents of files edited by the gold patch, and an example of the diff format we
                                           expect the answer to be in. The total model input consists of 1,558 lines of context or 20,882 to-
                                           kens. When comparing the gold patch and the model’s patch, we find an obvious mistake. While
                                           the model edits the correct function,                           _parse_other_parameters_section at line 684 in
                                           sphinx/ext/napoleon/docstring.py , it changes the function to behave as if                                                             napoleon.
                                           use_param were always True instead of checking the config setting first and copying what the
                                           _parse_parameters_section does, like the gold patch. In the tests,                                                        test_parameters
                                           _with_class_reference directly compares the documentation produced using a config where
                                           napoleon_use_param issettoFalse,whichcatchesthemodel’serrorimmediately.
                                           Comparing results across all the examples we consider, we notice a few prominent trends in behav-
                                           ior. Models tend to write primitive Python code and do not leverage existing third-party libraries or
                                           the rest of the codebase for their solutions. Models’ generations also reflect a “greedy” approach
                                           of solving the problem exactly, with little regard for code style or logical constraints that might be
                                           reflected by the codebase (i.e. using relative instead of absolute imports). In contrast, we observe
                                           that many gold patches will make structural improvements that cover a much larger scope of the
                                           codebase; these edits not only resolve the issue, but also anticipate and solve potential future issues.
                                           6      RELATED WORK
                                           Evaluation of LMs. Several recent works for evaluating LMs have either proposed a collection
                                           of mutually distinct tasks spanning across multiple domains (Hendrycks et al., 2021; Liang et al.,
                                           2022;Srivastavaetal.,2023)orturnedtothewebasaninteractivesettingfeaturingtasksthatrequire
                                                                                                                       8

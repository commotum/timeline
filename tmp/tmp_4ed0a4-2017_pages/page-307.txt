            294         9.  FREQUENCY  AND  GAME  APPROACHES  TO  RANDOMNESS
                Lemma.  Assume  that we  know in  advance  some  set A  of n-bit  strings  that 
            contains  at most 2s  elements for some s < n.  Then there  exists a strategy in the 
            described game that guarantees  that we win at least n — s  on every element of A 
            (for every series of n games when the sequence of outcomes belongs to A).
                For example, if A contains only one string (in other words, we know in advance 
            all the outcomes for all n games), the lemma says that we can win n dollars (not 
            a surprise:  we win one dollar in each game).  For comparison,  in the martingale 
            setting we could make 2n  dollars out  of 1  dollar.  If we  know  results  of some  к 
            games, the lemma guarantees that we can win к dollars (and this is again trivial). 
            A bit more complicated example is to assume that we know that the number of 
            ones is even;  in this case s = n — 1.  The lemma says that we can win one dollar. 
            (Indeed, we can make zero bets until the last game, and then put 1 dollar on the 
            right outcome which is known at that moment.)
               P r o o f.  At each moment we know some prefix w of the sequence; let j be its 
            length.  There are 2n-J  possible extensions of j  (up to an n-bit string),  but only 
            some of them are in A.  Let us consider their fraction (the conditional probability 
            of A after w)\ a negated logarithm of this fraction is called the information capital 
            of the player.
               Initially this capital equals n — s.  We will show that we can make bets in such 
            a way that the sum of the information and real capitals never decreases.  Then at 
            the end of the game, when the sequence is in A and the information capital is 0, 
            the real capital is at least n — s, as required by the lemma.
               Why can we make a bet that guarantees the non-decrease?  Assume that the 
            information capital is now (—logp) for some p (the current fraction of A-elements 
            among the extensions).  Knowing A, we can compute this capital.  We know also 
           how it will change after the next game:  if 0 appears, it becomes equal to (— logpo)) 
           and if 1 appears, it becomes equal to (— logpi), where po and pi  are fractions of A 
           among the extensions of wO and w 1.  Evidently, p = (po +pi)/2.  We need to find 
           a bet d such that in both cases the sum of information and real capitals does not 
           decrease:
                                        -logpo -  О  -logp, 
                                          log Pi +d ^   log p,
           or (finding the corresponding bounds for d)
                                 -logpo T log P > d ^  log p T log pi,
                                      log(p0/p) ^ d ^ log(pi/p).
           Such a d exists if and only if p/po ^ Pi/p■  This can  be rewritten  as p2 ^ popi 
           and  follows  from  the  inequality  between  arithmetic  and  geometric  means.  Note 
           also that po and p\ do not exceed 2p, so the bounds for d (and d itself) are in the 
           interval [—1,1].  The lemma is proven.
               One can explain the relation of this lemma and martingales (and an alternative 
           proof of the lemma)  as  follows.  The martingale makes some decision  about  the 
           proportion between two opposing bets, and this decision determines a multiplication 
           factor for the capital in a given round.  The possible choices are parametrized by a 
           point in a closed interval.  The factors for different rounds are multiplied, so their 
           logarithms are added.  The choices for the different values of the parameter can be

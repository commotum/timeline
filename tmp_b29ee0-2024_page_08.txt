                                       8        S. He et al.
                                       duces noise and results in information loss, leading to sub-optimal performance
                                       in segmentation tasks. To mitigate these issues, we introduce Geometric-guided
                                       Feature Propagation designed to generate high-quality per-point embeddings.
                                       Geometric features gf, which carry comprehensive point information, serving
                                       as a “gold message” for enhancing the upsampling process. By integrating these
                                       geometric features, we aim to significantly improve the quality and accuracy of
                                       the generated dense per-point embeddings.
                                           As illustrated in Fig. 3, we begin by upsampling the higher-layer features
                                       f ,f from a smaller set of points N to larger sets N ,N , employing Point-
                                         3   4                                        1                      3   2
                                       Net++’s[46] propagation techniques. This step yields features f′ ∈ RN3×D, and
                                                                                                                      3
                                         ′      N2×D
                                       f4 ∈ R          . Subsequently, we perform downsampling on the geometric features
                                       g from the original number of points N to reduced counts N ,N , respectively,
                                         f                                                                         2    3
                                       utilizing the Farthest Point Sampling (FPS) technique. In this process, we di-
                                       rectly obtain the features of the sampled points without performing additional
                                       k-nearest neighbor (k-NN) and pooling operations to simplify the computation
                                                                             N ×D                    N ×D
                                       and produce features fg,1 ∈ R 3             , and fg,2 ∈ R 2         .
                                           In the next phase, we integrate the up- and downsampled features, processing
                                       them through fully connected layers and ReLU activation to update the feature
                                                 ˜        N ×D           ˜         N ×D
                                       vectors f3 ∈ R 3          , and f4 ∈ R 2           . Note that the last layer feature f5
                                                                                                       ˆ
                                       bypasses this step. Instead, we concatenate it with hpoint from the LLM output
                                                  ˜
                                       to form f5 to perceive multi-modal information from LLM.
                                           Finally, to enable information exchange across different point densities, we
                                                                                                                ˜       ˜
                                       propose attentive propagation. Take the propagation from f5 to f4 as example.
                                               ˜       N2×D                                                                           ˜
                                       Here, f4 ∈ R            acts as a set of local centers. For each local center within f4,
                                                                                       ˜
                                       weidentify its neighboring points from f5 using the k-NN algorithm, resulting in
                                                 N2×k×D                                                                     ˜
                                       f54 ∈ R             . Then, employing cross-attention mechanism, where f4 serves as
                                       query and f54 as both key and value, facilitates information flow across different
                                       point densities and effectively extract relevant details into the query points.
                                                                                            ˜ T !
                                                                   ˆ                          f4f54
                                                                   ˜       ˜                   √
                                                                   f4 = f4 +softmax                      f54.                         (5)
                                                                                                  D
                                           Leveraging geometric-guided feature propagation enables us to produce high-
                                       quality per-point embeddings denoted as fP, laying the foundation for generat-
                                       ing precise segmentation masks expressed as follows:
                                                                            ˆ                ˆ     ˆ                                  (6)
                                                                f =P(f             , g ),   m=h ⊗f .
                                                                  P          point    f              seg      P
                                       3.5    Training Objectives
                                       Our model is trained end-to-end leveraging the text classification loss and the
                                       segmentation mask loss:
                                                                  L=λ L +λ L +λ L ,                                                   (7)
                                                                         txt  txt     bce   bce     dice  dice
                                       where L       denotes the auto-regressive cross-entropy loss targeting text genera-
                                                 txt
                                       tion accuracy, segmentation mask loss includes both binary cross-entropy (BCE)

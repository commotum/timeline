            274         9.  FREQUENCY  AND  GAME  APPROACHES  TO  RANDOMNESS
                Choosing the weight more carefully, one may prove the following general state­
            ment [171, 47].  Let /  :  [1, +oo) -> [0, -boo) be a non-decreasing continuous function 
            such that Jj00 fit) ft2 dt ^ 1.  Then for every martingale m  there exists a martingale 
            m! with the following property:  If at some sequence ш the martingale m reaches c 
            at some moment, then m! reaches /(c) at the same moment and never goes below 
            /(c) later.  (The integral bound in the condition is sharp.)
                Up to now we assumed that the coin is symmetric—the probabilities of heads 
            and  tails  declared  by  the  casino  are equal.  This  means  that  in  a fair  game  the 
            bets on zeros  and ones should  be doubled.  But  we can consider other settings. 
            Imagine that casino claims that 0 appears with probability 1/3 and 1 appears with 
            probability  2/3.  To  make  the game  rules  consistent  with  this  claim,  the  casino 
            should return bets on 0 multiplied by 3, and bets on 1 multiplied only by 1.5.  The 
            definition of the martingale changes accordingly:  m(x), the capital after x, should 
            be equal to the sum of its two parts—the amount bet on 0 equals m{x0)/3,  and 
            the amount bet on 1 equals to 2m(xl)/3.  So we get the condition
                                              1         2
                                      m(x) = - m ix0) + -m {x 1),
            which can also be read as “the capital before the next game is equal to the expected 
            capital after it”.
                Let us now give a formal definition.  Let 7Г be an arbitrary probability distri­
            bution on f2 (informally, the casino claims that the coin behaves according to it). 
            The corresponding function on strings will also be denoted by 7Г, so 7г(х) = тг(0,х).
                A non-negative function m on binary strings is called a martingale with respect 
            to 7Г  (with initial capital 1) if m(A) = 1 and
                                т(х)тг(х) = т(х0)тг{х0) + т(а;1)7г(а:1)
            for all x.  (This definition corresponds to the informal discussion above:  Dividing 
            the equation by 7г(ж), we get conditional probabilities тг(х0)/тг(х) and 7г(ж1)/7г(:г) 
            of 0 and 1 after x.)
               In other words, we require that the function т[х)тт[х) is a measure, so a mar­
           tingale with respect to 7Г (or a ir-martingale) is just a ratio of some other measure 
            and 7Г.  Now we can extend the results above (essentially with the same proofs) to 
           the case of arbitrary measures:
                (1)  Let m  be a 7r-martingale, and let к be some threshold.  The ^-probability 
           of the event  “m reaches к on some prefix of ш"  is at most 1 /к.
                (2)  For every open set U there exists a martingale that reaches 1/tt(U) on all 
           elements of U.
                (3)  A set A is a 7r-null set if and only if there exists a 7r-martingale that wins 
            (or strongly wins) on all elements of X.
               The Doob-Kolmogorov inequality guarantees that every martingale is bounded 
           almost everywhere.  The following stronger statement (Doob’s theorem) is also true:
               Theorem 179.  For every n-martingale m for тг-almost every sequence ш,  the 
            values  of m   on prefixes  of ш  have  a finite  limit.
                (In o th e r   w o r d s ,  t h e   s e t   o f   s e q u e n c e s   ш,  w h e r e   m   d o e s   n o t   h a v e   a   f in it e   lim it , 
           i s   a   7 T -n u ll  s e t . )

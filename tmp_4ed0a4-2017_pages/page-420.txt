                              13.4.  EXAMPLES  AND  THE  PROOF  OF  THEOREM  238              411
                 (1) for original strings щ ,... ,Uk and every i, the program qi(u\,..., мд,) solves 
             (A -> Y) -> У;
                 (2)  if d(i)  = m,  then qi(ui,..., щ) remains a solution to (X —> Y) —> Y even 
             after we replace um by any other string vm (i.e., ql(ul,..., um_], vm,um+b ..., uk) 
             is a solution to (X —> Y) —> Y for every vm ).
                 Let  us  finish  the  argument  assuming  that  we  can  construct  such  a program 
             qi{v i,... ,Vk).  The algorithm that reconstructs urn from the rest of the ut's works 
             as follows.  We start (in parallel) the computations of d(i) for all inputs i.  As soon 
             as an i with d(i) — m is found, we apply the given program p to all the solutions 
             to  (X —>• Y) —> Y of the form qi{u\,..., wm_i, *, um+i,..., мд.) where * stands for 
             arbitrary strings  (all these programs are solutions due to  (2)).  As soon as one of 
            p’s outputs is of type [m, *], we halt:  the second component of the resulting pair is 
             V>m-
                 As we said, property (2) implies the correctness of this algorithm (assuming it 
            terminates).  However we still need to show that this algorithm terminates for some 
            m (we do not wait forever).  To this end we use the diagonal property of d.  Assume 
            that for all m the computation does not terminate.  This means, in particular, that 
            this happens for <p(wb • • •, и к ) for all i.  Property (1) guarantees, however, that in 
            this case we apply p to a solution for (X —> Y) —> Y.  Therefore,  [p](çi(ui,..., мд)) 
            is defined and is a solution to Z for all i.  Thus the computations do not terminate 
            because the first component t of the output pairs never coincides with d(i) (for all i 
            such that d(i) is defined).  But this first component is a total computable function 
            of г, so we get a contradiction with the diagonal property.
                 It remains to construct the program qi(v\,..., v^) (for arbitrary г and for arbi­
            trary strings t»i,..., Vk).  Given s as input, this program does two things in parallel:
                 (1)  it runs the computation of d(i)\
                 (2)  it  uses  vt  for  t  G  I  to  construct  a potential solution to  A,  and  it  applies 
            s to that solution and checks whether the output of s equals [t) vt] for some t € J 
             (the  second  coordinate  coincides  with  the  the  tth  element  of the  original  tuple
                 As soon as one of these events happens (including the coincidence in (2)), the 
            program performs the following actions:
                    •  In case (1), when d{i) is defined and equals some m:
                        —  if m ^ /, we use vt  (with t G I) to construct a tentative solution to 
                           X and apply s to this solution;  the output  of s is returned  as  the 
                           output of qi(vi,..., Vk) on input s;
                        —  if m €  /  (and  therefore m ^  J),  we return the pair  [t,vt\  for some 
                           t  G  J  (to be precise,  let  us  agree that we use minimal t G  J);  note 
                           that in this case output does not depend on s.
                    •  In case (2), the program outputs the pair [t,vt] produced by s.
                Why does this work? If V\,...,vд, coincides with щ ,... ,Uk, and s is a solution 
            to  (X  —>  Y)  —>  Y,  then  the second  event  always  happens  unless the first  event 
            happens earlier; in both cases the output of дДиъ • • •, Wfc) is a solution to Z.  So in 
            this case the program qi(ui,... ,Uk) is a solution for ((A —ï Y) —> Y) —> Z.
                Now assume that d(i) = m, that each vt, except for (maybe) vrn, coincides with 
            ut,  and that s is a solution to (A —> Y) —>• Y .  In this case we do not know which 
            of the two parallel computations will stop first.  But  in both cases the output of 
                i,..., Vk) is guaranteed to be a solution to Z.  Indeed, in case (1) we do not use
            qi(v

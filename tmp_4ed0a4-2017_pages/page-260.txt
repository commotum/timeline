                                      8.5.  FORBIDDEN  SUBSTRINGS                      247
            it remains to apply (1) to each factor.
                On the other hand,  the following argument derives (1)  from (2).  Let us split 
            the conditions  in  (1)  and  consider separately the events  inside  N(i)  and  outside 
            N(i).  (Here i is the number of the event in the left-hand side of (1).)  Let N and 
            F be the conjunctions of the negations of the events in these two groups (near and 
            far).  Then,  following the scheme explained above, we estimate the probability as 
            follows:
                                Pr[Ai\N A F]  < Pv[Aj\F\     Pr [A] 
                                                Pr[iV IF]   Pr[iV IF] ’
            We can use inequality (2) and conclude that the denominator in the last fraction is 
            at least the product of (1 — Et) for all t G iV, and it remains to recall the assumption 
            of LL where these factors (and, maybe, others) appear.  We assume here that there 
            are neighbor events among the conditions.  If not, the left-hand side in (1) equals 
            Pr[Aj]  (due to independence) and is bounded by E{.
                It remains to explain why the reductions of (1) to (2) and vice versa (which we 
            have described)  do not lead to a vicious circle.  Reducing  (1)  to  (2)  as explained 
            above,  we use  (2)  in  the situation where  the number of events  in  the  inequality 
            (on both sides of  “|”)  is smaller than in inequality  (1),  which we want  to prove. 
            (Indeed, the event A* disappears).  The other reduction, where we derive (2) from 
            (1), does not increase the total number of events in the inequality.        □
               Here is an example of a combinatorial problem where LL is useful:
                249  A finite tape is given where each cell may contain a number between  1
            and N.  For each borderline between neighbor cells some pairs of numbers (l.r) are 
            prohibited, in the sense that one should not put I on the left and r on the right of 
            this border.  Prove that if for each border the fraction of prohibited pairs (among 
            N2 pairs) is at most 4/27, then one can fill all cells satisfying all restrictions.
                (Hint:  For each border consider the event  “a prohibited pair appears”.  Each 
            event has at most two neighbors, and for Ei = 4 one can apply the LL.)
                250 Prove a similar  result  (even  with  slightly  better  parameters)  without 
            using the LL. If each set of forbidden pairs contains less than 1/4 of all pairs, then 
            one can satisfy all the restrictions.
                (Hint:  In each position more than half of candidates accept more than half right 
            neighbors, and more than half of candidates accept more than half left neighbors. 
            So there exists some candidate that accepts more than half of left neighbors and 
            more than half of right neighbors at the same time.  Starting with this number, one 
            may add numbers from the left to the right, using the fact that two sets containing 
            more than half of the elements always have a common element.)
               8.5.3.  Lovâsz lemma and forbidden strings.  Now let us use LL to prove 
           Theorem  157.  As  usual,  it  is  enough  to  prove  the  existence  of arbitrarily  long 
           strings without forbidden substrings (due to the standard compactness argument).
               So we fix some length and consider random strings of this length where all the 
           bits are independent and uniformly distributed.  A bad event happens when some 
           forbidden string appears  at some fixed position  (different positions give different 
           events).  For every n consecutive bits, the appearance of a forbidden string in this 
           position has probability 2^a-1^n.  Using the LL, we need to fix some number Ei for 
           each event A*, and for this event  (the appearance of a forbidden string in a given

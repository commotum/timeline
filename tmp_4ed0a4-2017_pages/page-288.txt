                         9.6.  A  DIGRESSION:  MARTINGALES  IN  PROBABILITY  THEORY          275
                 Proof.  Kolmogorov’s inequality guarantees that m is bounded on prefixes of 
            u) with probability 1.  So it remains to prove that for every rational p, q such that 
            0 < p < q, the following event has probability zero:  “The capital on prefixes of ш 
            oscillates becoming less than p infinitely often and greater than q infinitely often.” 
            To show this, we consider another martingale m' that is unbounded at all sequences 
            to where the oscillations happen.  The martingale m' implements the classical “buy 
            low—sell  high”  strategy:  it  looks  at  the  capital  of the  original  martingale,  but 
            keeps its own capital unchanged until m becomes less than p.  Then m!  behaves 
            like m (with some constant factor) until m reaches capital greater than q\ then in! 
            again keeps the capital unchanged until m goes below p, etc.  At each iteration m' 
            increases its capital by factor  (q/p), so it tends to infinity for sequences where m 
            oscillates.                                                                       □
                This theorem can be used to define conditional probabilities.  Consider some 
            measure pi on the product flxfl.  Then we can consider pi, which is the projection 
            of p at the first coordinate (the marginal distribution).  We also want to define the 
            conditional distribution of the second coordinate when the first coordinate is equal 
            to some öéQ. We cannot use the elementary definition of conditional probability 
            with some event  as  a condition since the event  “the first  coordinate  is  equal  to 
            a”  often has zero probability.  Usually the conditional probability is defined  (for 
            //x-almost every a)  using the Radon-Nikodym derivative, but in our case we can 
            give a more concrete definition using the Doob theorem.
                Let  A  be some property of the second coordinate.  Consider  the conditional 
            probability of A with the condition “the first coordinate has prefix a = ao ■ • • a^-i”. 
            For a fixed A this probability (as a function of a) is a pi-martingale (up to a con­
            stant), so the Doob theorem guarantees that for p\-almost every a these probabili­
            ties converge to some limit.  This limit (defined pi-almost everywhere) is called the 
            conditional probability of A when the first coordinate is equal to a.  (It is possi­
            ble that some prefix has probability 0, and then the conditional probability is not 
            defined, but this creates problems only for a set of measure 0.)
                The advantage of this construction is that it allows us to define the conditional 
            probability for computable measure p on fl x Q and every ML-random (with respect 
            to pi) sequence.  See [7] for details.
                Returning to our main topic, we conclude this section with the following (evi­
            dent) observation:
                Theorem 180.  For every martingale there exists a sequence on which it does 
            not win  (and,  moreover,  is bounded by 1  on all prefixes).
                Proof.  The definition of martingale implies that one of the numbers m(x0) 
            or m(x 1) does not exceed m(x), so to each x we can add one bit not increasing the 
            value of the martingale.                                                          □
                (If the casino can choose the outcome of coin tossing after the gambler makes 
            a bet, it can guarantee that the gambler never wins anything.)
                       9.6.  A digression:  Martingales in probability theory
                Theorem 177 can be interpreted as follows:
                (a)      to  prove  that  some  set  has  //-measure  0,  it  is  enough  to  construct  a p- 
            martingale that wins on all its elements;

                                                                                         ScatterFormer      13
                               Table 4: Ablation experiments on the validation set of Waymo Open Dataset. “SLA”
                               and “CWI” refer to the proposed Scattered Linear Attention and Cross-Window In-
                               teraction modules, respectively. “CPE" refers to Conditional Position Embedding. AP
                               and APH scores on LEVEL2 are reported.
                                                     Ablation        Veh.      Ped.     Cyc.
                                              -      baseline      71.6/71.1 76.0/70.9 74.2/73.1
                                             (a) w/o SLA module 68.5/68.0 73.3/67.0 71.0/69.9
                                             (b) w/o CWI module 69.6/69.2 74.0/69.9 72.1/71.1
                                             (c)   CWI→SW 69.9/69.575.0/70.473.8/72.4
                                             (d)     w/o CPE       70.2/69.8 73.3/67.2 72.4/70.5
                               Table 5: Comparison of model performance using different window sizes at various
                               stages. The APH (L2) scores on different categories are reported.
                                                  Window Size Region Size Veh. Ped. Cyc.
                                                       10        3.20 m    70.2 69.2 71.0
                                                       12        3.84 m    71.1 70.9 73.1
                                                       14        4.48 m    71.3 69.9 72.5
                                                       16        5.12 m    71.0 69.2 72.3
                               objects. However, excessively large windows can degrade the performance. We
                               speculate that this is because larger windows encompass more tokens, thereby
                               mitigating the focusing power of linear attention.
                                   Kernel Design in CWI. Table 6 presents the performance under various
                               kernel configurations in the Cross-Window Interaction (CWI) module. Increasing
                               the number of parameters in the kernel significantly enhances performance. For
                               example, using a large 7×7 kernel brings notable performance improvements,
                               but also introduces more latency. Additionally, larger kernel strides enhance the
                               exchange rate of tokens across windows. For example, using dilated convolutions
                               in CWI performs slightly better than using non-dilated convolutions. Instead
                               of scaling up large, we decompose large kernel into more efÏcient 1D kernels,
                               which achieves the optimal latency while keeping comparable performance. As
                               the current Spconv library lacks support for depth-wise convolution, we have
                               developed a modified version to address this limitation.4
                               4.5   Comparison with Different Linear Attentions
                               We further explored the performance of ScatterFormer by conducting experi-
                               ments with several other linear attention mechanisms, including Gated Linear
                               Attention [32], Cross-covariance Attention (XCA) [1], and Focused Linear At-
                               tention [13]. The results are summarized in Table 7. Our findings suggest that
                               the window-based attention framework employed by ScatterFormer is not highly
                               sensitive to the specific form of linear attention used. Notably, EfÏcient Atten-
                               tion [3] performs slightly worse than XCA [1] in the Vehicle class but better in the
                                4 https://github.com/skyhehe123/spconv

                             100%
                              80%
                              60%                                                   LLaMA2-7B                 31.1
                            ccuracy40%                                              LLaMA2-7B-8k
                            A                                                       LLaMA2-7B-16k             31.0
                              20%
                               0%                                                                            e30.9
                                        2k    4k    6k    8k   10k   12k   14k   16k   18k   20k
                                                            Context Length
                             100%                                                                             30.8
                              80%                                                                            verage Scor
                                                                                                             A30.7                                     PI(s=2)
                              60%                                                  LLaMA2-13B
                            ccuracy40%                                             LLaMA2-13B-8k
                            A                                                      LLaMA2-13B-16k             30.6
                              20%                                                                                                                                  YaRN(s=2)
                               0%                                                                             30.5
                                        2k    4k    6k    8k   10k   12k   14k   16k   18k   20k                   6.71 6.74  6.78   6.86         24.8            25.55
                                                            Context Length                                                              Disturbance(×10 3)
                         Figure 4: Passkey retrieval performance of models with                          Figure 5: Performance of LLaMA2 declines on the
                         different sizes under various context window lengths.                           LongBench-Ewiththeincreasing disturbance.
                                         Method ContextLength                                                        nˆ     0-4k         4-8k         8k+         Avg.
                                                            8k            16k                                       56      31.20       31.07        29.87       30.71
                                              PI          24.08          33.67                                      64      31.19       31.03        30.27       30.83
                                           YaRN           25.55          35.44                                      72      31.39       31.12        30.12       30.87
                                            Ours           6.71          22.92                                      80      31.64       31.40        30.43       31.15
                                                             −3                                                     88      31.32       31.34        30.53       31.06
                         Table 3: Disturbance(×10                ) of rotary angle distribu-                        96      31.38       31.52        30.34       31.08
                         tions resulting from difference methods when extended
                         to various length. Our method has the lowest distur-                            Table 4: Influence of interpolation dimension numbers
                         bance. More details are shown in appendix A.2.                                  nˆ on the long context benchmark.
                         MohtashamiandJaggi(2023),wesetthemaximum                                        turbance via incrementing the value of t in eq. (9).
                         input length for all models to 20k, with prompt de-                             As shown in Figure 5, with the disturbance in-
                         tails demonstrated in Appendix B.3. As shown in                                 creases, the performance of the model basically
                         Figure 4, the LLaMA2 models, utilizing our con-                                 shows a monotonically decreasing trend, which re-
                         text window extension approaches, achieve 100%                                  veals a strong consistency between the disturbance
                         accuracy within the predetermined length.                                       metric and the experimental performance.
                         5 Analysis                                                                      5.2      Influence of Interpolation Dimension
                         In this section, we analyze the impact of distribu-                             Let us denote the number of interpolation dimen-
                         tional disturbance on model performance. More-                                  sions as 0 ≤ nˆ ≤ d. In eq. (9), we can control
                         over, we analyze the selection of different interpo-                            the value of t to decide how many dimensions the
                         lation dimension numbers in eq. (9) and the impact                              interpolation strategy is used for. We demonstrate
                         of the number of intervals in eq. (5). All analy-                               the influence of the number of interpolated dimen-
                         ses are based on the task of extending the context                              sions nˆ in Table 4, where nˆ decreases from 96
                         windowofLLaMA2-13Bfrom4kto8k.                                                   to 56 as t increases. We observe that for dimen-
                                                                                                         sions where the disturbance scores Di(PE ,P )
                         5.1     Influence of Disturbance                                                          i    I                                                 L′     L
                                                                                                         and D (P ′,P ) are very close, corresponding to
                                                                                                                        L      L
                         Wecalculate the distributional disturbance induced                              the cases of nˆ = 96, 88, and 80, the impact of choos-
                         by different methods with eq. (8). As illustrated                               ing extrapolation or interpolation on the model’s
                         in Table 3, we achieve the lowest distributional                                performance is slight and negligible. However,
                         disturbance, whichisinlinewithexperimentresults.                                as the disturbance increases, corresponding to the
                                                                                                         cases of nˆ < 80, maintaining distributional consis-
                             Furthermore, when extending the context win-                                tency becomes crucial, and we can observe a grad-
                         dow of LLaMA2-13B to 8k, we investigate the                                     ual decline in the performance when employing
                         model’s extension performance with increased dis-                               extrapolation to those dimensions where the dis-
                                                                                                   7294

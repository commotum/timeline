                                                                                                                                   review articles
            grammar specifies this set Exp :                 String transformation by examples.             an overflow error. If the input num-
                                                2
                                                                                                            bers are bitvectors of length 32, an 
                                                               Input                 Output                 alternative correct formulation can 
                                                               Nancy FreeHafer       FreeHafer, N.          first extend the given numbers to 
                                                                                                            64-bits to make sure that no overflow 
            Here the nonterminal T generates lin-              Andrew Cencini        Cencini, A.            error will be introduced when they are 
            ear expressions, the nonterminal C                 Jan Kotas             Kotas, J.              summed up together, then divide by 
            generates tests used in conditionals,                                                           2, and finally convert the result back 
            and for a test t and expressions e1 and                                                         to 32-bits. This is specified by the 
            e , ITE(t, e , e ) stands for if t then e          The set of string transformations  function:
             2           1   2                          1
            else e . Now f(x, y) = ITE((x ≤ y), y, x)       supported by the domain specific lan-
                  2
            satisfies the logical specification  guage of Excel can be specified by the 
            Spec  and also belongs to the set Exp .         grammar below (simplified for 
                 1                                     2
            Observe that this expression does not           exposition):                                    where the operator bv  converts a 
                                                                                                                                         64
            involve addition of terms and thus                                                              32-bitvector to a 64-bitvector by con-
            can also be generated by the following                                                          catenating 32 zeros to its left, and bv  
                                                                                                                                                       32
            simpler grammar that specifies the                                                              converts a 64-bitvector to a 32-bitvec-
            set Exp  of expressions:                                                                        tor by taking the 32 rightmost bits.
                     3
                                                                                                               Since the result does not require 
                                                                                                            more than 32-bits, we want to know if 
                                                            In this grammar, the nonterminal E              there exists an equivalent solution 
                                                            generates string transformations, that works without using an extension 
            Now suppose we change the logical  and the nonterminal I generates inte-                        to 64-bits. We can pose this as a SyGuS 
            requirement of the desired function f           ger-valued index expressions. The  question: does there exist an expres-
            from Spec  to Spec :                            Concat(s ,  s ) function returns the  sion that is equivalent to f (x, y) and is 
                        1        2                                      1   2
                                                            concatenation of the strings s1 and s2,         generated by the grammar:
                                                            SubStr(s, i1, i2) returns the substring 
                                                            of the string s between the integer 
            Observe that this is an under-specifi-          positions i1 and i2, Len(s) returns the 
            cation since multiple functions can  length of the string s, and IndexOf (s1, 
                                                                                               th
                                                            s , i) returns the index of the i  occur-       where + is addition, &, , ˆ are bitwise 
            satisfy this logical constraint.                 2
            If we choose the set of expressions to          rence of the string s2 in the string s1.        and, or, and xor,  and  are shift 
            be  Exp , a possible solution is                   A possible solution to the SyGuS  left and shift right, N is the set of inte-
                      2
            f (x, y) = ITE( (x ≤ y), y, x) + 1. However,    problem is: Concat(s1, “,”, s2, “.”),  ger constants between 0 and 31. Note 
            this solution will no longer work if the        where s1 is the expression SubStr(s,            that the grammar explicitly rules out 
            set of expressions is Exp . This ability        IndexOf(s, “  ”, 1) + 1, Len(s) ) and s  is     the use of bitvector conversion opera-
                                         3                                                           2
            to change the specification of the  SubStr(s, 0, 1). This program concat-                       tors bv  and bv  used in the original 
                                                                                                                    64         32
            desired function by revising either the         enates the following four strings: the          program f. A correct solution to the 
            logical formula or the set of expres-           substring in the input string starting          synthesis problem is the program
            sions offers a significant convenience          after the first whitespace; constant 
            in encoding synthesis problems.                 string “,”; the first character; and con-
               Programming by examples. An  stant string “.”.
            app ealing application of synthesis is             Program optimization. In auto-                  Template-based invariant synthe-
            to learn a program from representa-             matic program optimization, we are  sis. To verify that a program satisfies 
            tive input-to-output examples. The  given an original program f, and we  its correctness specification, one 
            Flash-Fill feature in Microsoft Excel is        want to find another program g such             needs to identify loop invariants—
            a recent success of such a program-             that the program g is functionally  conditions over program variables 
                                                  10,11
            ming methodology in practice.              It   equivalent to f and satisfies specified         that are preserved by an execution of 
            allows Excel users to perform string  syntactic constraints so it has better                    the loop. As a simple example con-
            transformations using a small num-              performance compared to f. The syn-             sider the following program, where i, 
            ber of input-to-output examples. For            tactic constraint can be used to rule           j, m, and n are integers:
            example, consider the task of trans-            out, or restrict, the use of certain oper-
            forming names from one format to  ations deemed expensive.
            another as shown in Table 1. Formally,             As an example, consider the prob-
            the semantic constraint on the desired          lem of computing the average of two 
            function f from strings to strings is  un  signed integer input numbers x 
            given by the formula with a conjunct            and y represented as bitvectors. The 
            for each of the rows, where the con-            obvious expression (x + y)/2 is not a 
            junct for the first row is of the form          correct implementation since the 
            f (Nancy FreeHafer) = FreeHafer, N.             intermediate result (x + y) can cause 
                                                                                         DECEMBER 2018 |  VOL. 61  |  NO. 12  |  COMMUNICATIONS OF THE ACM    87

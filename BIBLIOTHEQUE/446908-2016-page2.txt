               for BlinkFill does not support conditionals and loops, but                       Token                     Regex              Abbr.
                                                                                             ProperCase          r ‚â°\p{Lu}(\p{Ll})+             p
               supports a richer class of substring extraction tasks since                                        p
               it can learn arbitrary regular expression tokens based on                         CAPS                 rC ‚â°\p{Lu}+              C
               the spreadsheet data. The substring extraction and merg-                       lowercase               r ‚â°\p{Ll}+                l
                                                                                                                        l
               ing tasks supported by BlinkFill account for the majority                       Digits                      \d+                  d
               (more than 88%) of the real-word FlashFill tasks obtained                      Alphabets          r ‚â°[\p{Lu}\p{Ll}]+            Œ±
                                                                                                                  Œ±
               from the Excel product team.                                                 Alphanumeric          [\p{Lu}\p{Ll}0-9]+           Œ±n
                  The idea of using the data items other than input-output                   Whitespace              rws ‚â°\p{Zs}+              ws
               examples to learn consistent programs is inspired from the                      StartT                        ‚àß                  ‚àß
               work on Potter‚Äôs wheel [22].       Potter‚Äôs wheel is a precur-                    EndT                        $                  $
               sor to Trifacta‚Äôs pioneering Data Wrangler system [11] for               ProperCaseWSpaces               r (r   r )*            ps
                                                                                                                         p  ws p
               interactive data wrangling. For column split transforma-                     CAPSWSpaces                r (r    r )*            Cs
                                                                                                                        C ws C
               tions, Potter‚Äôs wheel learns the most suitable logical struc-             lowercaseWSpaces               r (r   r )*            ls
                                                                                                                         l  ws l
               ture consistent with the set of column strings based on the               AlphabetsWSpaces              r (r    r )*            Œ±s
               Minimum Description Length metric [23]. Our technique                                                     Œ± ws Œ±
               of semi-supervised learning in BlinkFill is diÔ¨Äerent from               Table 1: The set of base regular expression based
               Potter‚Äôs wheel in three key ways. First, BlinkFill learns               tokens supported by BlinkFill.
               the complete set of logical structures (and sub-structures)
               that are consistent with a given set of column values in-
               stead of learning only one structure as there might be mul-             starts at index i and ends at index j, where j ‚â• i and length
               tiple consistent sub-structures. Second, the learnt structures          of the substring is j ‚àí i + 1.
               are represented succinctly using a VSA so that they can be                Tokens: BlinkFillsupportstwokindsoftokenpatterns
               integrated in VSA-based program synthesis techniques such               at the base level of the DSL: (i) regular expression tokens
               as FlashFill. Finally, the class of string transformations              and (ii) constant string tokens. The regular expression to-
               supported by BlinkFill (concatenation of substrings and                 kens match a string with a predeÔ¨Åned regular expression
               constant strings) is richer than the string transformations             pattern. There are 13 such tokens supported by BlinkFill,
               supported by Potter‚Äôs wheel.                                            which are shown in Table 1. The constant string tokens
                  Weevaluate BlinkFill on 207 benchmarks [27] obtained                 match a string with the corresponding constant string pat-
               from the Excel team and online help forums. In comparison               tern and are learnt automatically by BlinkFill during the
               to FlashFill, BlinkFill takes signiÔ¨Åcantly less time to                 synthesis process.
               learn the desired transformations and requires fewer input-
               outputexamples(inspiteofFlashFillusingahighly-tuned                        Definition 1      (Token Match). Let n be the number
               machine learning based ranking technique). BlinkFill is                 of matches of the pattern deÔ¨Åned by a token œÑ in a given
               on average 41√ó (median 11√ó) faster than FlashFill. It                   string s. We deÔ¨Åne a token match (œÑ,k) as the kth ((n+k)th
               requires on average 1.27 examples per benchmark as opposed              if k < 0) match of token œÑ in s. We denote the set of
               to 1.53 examples needed by FlashFill. This paper makes                  all token matches as œÑ  s, such that size(œÑ  s) = n,
               the following key contributions:                                        (œÑ,k) ‚â° (œÑ  s)[k] if k > 0, and (œÑ,k) ‚â° (œÑ  s)[n + k + 1]
                   ‚Ä¢ We present a new data structure InputDataGraph to                 if k < 0. We denote the start and end indices of a token
                     succinctly represent the set of all logical structures in a       match as (œÑ  s)[k] ,‚Üí and (œÑ  s)[k] ‚Üê- respectively.
                     DSLthatareconsistentwithagivensetofstrings, and
                     present an eÔ¨Écient algorithm to learn the structure.                For example, given a string s = "Mumbai, India", the
                                                                                                                           st
                                                                                       token match (C,1) denotes the 1        match of the CAPS token
                   ‚Ä¢ WepresentanewPBEsystemBlinkFill,whoseDSL                          (matching the substring "M"), where size(C  s) = 2, (C 
                     consists of concatenated expressions of constant string           s)[1] ,‚Üí= 1, (C  s)[1] ‚Üê-= 1. The token match (C,-1)
                     expressions and substring expressions (based on the               (matching the substring "I") is deÔ¨Åned by (C  s)[2] ,‚Üí= 8,
                     InputDataGraph). We present a sound and complete                  (C  s)[2] ‚Üê-= 8. Similarly, the token match (p,2) matches
                     synthesis algorithm to learn expressions in the DSL.              thesubstring "India", (l,1)matches"umbai", theconstant
                   ‚Ä¢ Weevaluate BlinkFill on 207 real-world benchmarks                 token match ("M",1) matches "M", and the constant token
                     obtained from the Excel product team and online help              match (", ", 1) matches the substring ", ".
                     forums. BlinkFill is signiÔ¨Åcantly faster (41√ó) and                  Version space algebra: Version-space Algebra (VSA)
                     requires fewer input-output examples (1.27 vs 1.53) in            was Ô¨Årst introduced by Mitchell [19] in the context of ma-
                     comparison to FlashFill.                                          chine learning and was later used in Programming by Ex-
                                                                                       amples/Demonstration systems such as SmartEdit [12] and
               2.    PRELIMINARIES                                                     FlashFill [7]. The key idea in VSA is to succinctly repre-
                                                                                       sent an exponential number of programs in polynomial space
                  Withoutlossofgenerality, weassumethatthestringtrans-                 and can be intuitively viewed as a directed graph with three
               formation task involves transforming a set of n input row               types of nodes: 1) leaf nodes with direct set of programs, 2)
               strings {(v1,¬∑¬∑¬∑ ,v1),¬∑¬∑¬∑ ,(vn,¬∑¬∑¬∑ ,vn)}, and the user has              intermediate union nodes representing a set-union of its chil-
                           1        k         1        k
               providedasetofminput-outputexamples{((v1,¬∑¬∑¬∑ ,v1),o1),                  dren VSAs, and 3) intermediate join nodes with k children
                                                                  1       k    s
               ¬∑ ¬∑ ¬∑ , ((vm, ¬∑ ¬∑ ¬∑ , vm), om)}. A string s is considered as simply     VSAs annotated with a k-ary function F such that it rep-
                       1        k     s
               a sequence of characters, where s[1] denotes the Ô¨Årst charac-           resents all resulting application of F to the cross-product of
               ter of the string and len(s) denotes the length of the string.          children values. More details about the VSA formalization
               Weuse the notation s[i..j] to denote the substring of s that            and applications can be found in [21, 27].
                                                                                  817

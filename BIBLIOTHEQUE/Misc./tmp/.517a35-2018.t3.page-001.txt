                 Accelerating Search-Based Program Synthesis using
                                            LearnedProbabilistic Models
                                       WoosukLee                                                      Kihong Heo
                                   woosuk@cis.upenn.edu                                           kheo@cis.upenn.edu
                                 University of Pennsylvania                                    University of Pennsylvania
                                             USA                                                           USA
                                        Rajeev Alur                                                   MayurNaik
                                     alur@cis.upenn.edu                                          mhnaik@cis.upenn.edu
                                 University of Pennsylvania                                    University of Pennsylvania
                                             USA                                                           USA
              Abstract                                                           central challenge in program synthesis concerns how to efÏ-
              Akeychallengeinprogramsynthesisconcerns how to efÏ-                cientlysearchforthedesiredprograminthespaceofpossible
              ciently search for the desired program in the space of possi-      programs. Various strategies have been proposed to address
              ble programs. We propose a general approach to accelerate          this challenge [3, 4, 13, 17, 32]. As a result, recent years have
              search-based program synthesis by biasing the search to-           witnessed a surge of interest in applying this technology to
              wards likely programs. Our approach targets a standard for-        a wide range of problems, including end-user programming
              mulation, syntax-guided synthesis (SyGuS), by extending the        [12], intelligent tutoring [27], circuit transformation [9], and
              grammarofpossibleprogramswithaprobabilisticmodeldic-               programrepair [20], among many others.
              tatingthelikelihoodofeachprogram.Wedevelopaweighted                   Despite significant strides, however, a key limitation of
              search algorithm to efÏciently enumerate programs in order         these strategies is that they do not bias the search towards
              of their likelihood. We also propose a method based on trans-      likely programs. As a result, they explore many undesirable
              fer learningthatenablestoeffectivelylearnapowerfulmodel,           candidates in practice, which hinders their performance and
              called probabilistic higher order grammar, from known solu-        limits the kinds of programs they are able to synthesize.
              tions in a domain. We have implemented our approach in a              It is well known that desired programs contain repetitive
              tool called Euphony and evaluate it on SyGuS benchmark             andpredictable patterns [15]. We propose a new approach
              problemsfromavarietyofdomains.WeshowthatEuphony                    to accelerate search-based program synthesis based on this
              can learn good models using easily obtainable solutions,           observation. Our key insight is to learn a probabilistic model
              and achieves significant performance gains over existing           of programs and use it to guide the search. To this end, our
              general-purpose as well as domain-specific synthesizers.           approach modularly addresses two orthogonal but comple-
              CCSConcepts •Computingmethodologies→Trans-                         mentarychallenges:1)howtoguidethesearchgivenaproba-
              ferlearning;•Softwareanditsengineering→Domain                      bilistic model, and 2) how to learn a good probabilistic model.
              specific languages; Programming by example;                        Wenextelaborate on each of these challenges.
                                                                                    Toaddressthefirst challenge, we target a standard formu-
              Keywords Synthesis, Domain-specific languages, Statisti-           lation, syntax-guided synthesis (SyGuS) [3], that has estab-
              cal methods, Transfer learning                                     lished various synthesis benchmarks through annual compe-
                                                                                 titions. SyGuS employs a context-free grammar to describe
              ACMReferenceFormat:                                                the space of possible programs. We extend the grammar
              WoosukLee,KihongHeo,RajeevAlur,andMayurNaik.2018.Ac-               with a probabilistic model that determines the likelihood
              celerating Search-Based Program Synthesis using Learned Proba-     of each program. We reduce the problem of enumerating
              bilistic Models. In Proceedings of 39th ACM SIGPLAN Conference     programsbylikelihoodtotheproblemofenumeratingtarget
              on Programming Language Design and Implementation (PLDI’18).       nodes by shortest distance from a source node in an infinite
              ACM,NewYork,NY,USA,17pages.https://doi.org/10.1145/3192366.        weighted graph. We solve the resulting problem efÏciently
              3192410                                                            using A* search [14]. While A* is significantly faster than
              1 Introduction                                                     other path finding algorithms, however, it requires a good
              Thegoalofprogramsynthesisistoautomaticallysynthesize               cost-estimating heuristic to guide its search. We show how
              a program that satisfies a given high-level specification. A       to automatically derive such a heuristic for a given grammar
                                                                                 andprobabilisticmodel.Ouralgorithmsupportsawiderange
              ©2018Association for Computing Machinery.                          of probabilistic models, including n-gram [2], probabilistic
              ACMISBN978-1-4503-5698-5/18/06...$15.00
              https://doi.org/10.1145/3192366.3192410

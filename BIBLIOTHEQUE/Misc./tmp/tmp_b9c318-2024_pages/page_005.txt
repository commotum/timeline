                                ll                                                                                                                             iScience
                          OPENACCESS                                                                                                                                 Article
                                                                                       Figure 2. The range of the ripple-spread center-emanating attention mechanism
                                                                                       Thequeryvoxeliscoloredred,thenon-emptyvoxileswithintheattentionrangearecolored
                                                       Quering 
                                                                    Non-attending
                                                                                       yellow, the empty voxels within the attention range are colored green and the white voxels
                                                        Voxel
                                                                         Voxel
                                                                                       are outside the range of attention and do not participate in the calculation.
                                                        Attending
                                                                      Attending
                                                       Non-empty
                                                                       Empty
                                                          Voxel
                                                                        Voxel
                   Methodology
                   In this section, we detail the overall framework of the one-stage anchor-free 3D detector(VSAC). As illustrated in Figure 1A, the VSAC mainly
                   consistsofthreemodules:(1)avoxelself-attentionnetworkisusedasa3Dbackbonemoduletoobtainrichglobalinformationandcontextual
                   information(seeFigure1B);(2)aPST-FPNservesasa2Dbackbonemoduletofurtherhighlightthekeyfeatures(seeFigure1C);(3)acenter-
                   point detection head module for predicted classes and regression location information (see Figure 1D).
                   Voxelization
                   Bis the set representing the entire point cloud, the expression is as follows:
                                                                             n         i    i   i   i    4                  o
                                                                       B =     bi =    b ;b ;b ;b eR ;i = 1;2;.;m                                                   (Equation 1)
                                                                                         x   y   z   r
                   Whereb representsapointintheset,(bx,by,bz)representsthe3Dcoordinatesandbrrepresentsintensityfeature,mdenotesthetotalnum-
                             i
                   ber of points in the set.
                                                                                                                                                   10,12,40
                       Becauseofthedisorderandirregularityoftheoriginalpointclouddata,weﬁrstemployamappingalgorithm                                        torepresenttheorig-
                   inal point clouds as voxels. The voxel coordinates (v) are calculated as follows:
                                                                                    b   by   b !
                                                                           v =     V      x    V            V       z                                               (Equation 2)
                                                                                       Vlong   ;   Vwidth   ;   Vheight
                   where V indicates the ﬂoor function, [V          ,V      ,V      ]˛R3 represent the quantization step size in voxelization.
                                                                long   width  height
                       This means that the continuous point cloud coordinates are mapped to discrete voxel coordinates through dividing each coordinate by
                   thequantizationstepsize[V           ,V      ,V      ]. The total numberofvoxelsisN             in space.Whenprocessingvoxels,ifthenumberofpoints
                                                   long   width  height                                     dense
                   in a voxelexceedsapresetthreshold,memoryconsumptionisreducedbyrandomlydiscardingtheexcesspoints.Conversely,iftherearenot
                                                                                      indices 
                                                                                                                                ...
                                                                                               98     ...  110     ...   -1          132
                                                                                        J
                                                                                      Voxel 
                                                                                                                                ...
                                                                                                      ...          ...
                                                                                     feature
                                                                                         Non-empty voxel feature   Empty voxel feature
                                                                                                                                ...
                                                                                       key   11365    ... 17958    ... 18331        20155
                                                                                      Voxel 
                                                                    V: (0,0,5)
                                                                                                                                ...
                                                                                               98     ...  110     ...   -1          132
                                                                      i
                                                                                     indices
                                                                                                        Hash table
                                                                Query index Vi
                                                                    V : (1,1,5)
                                                                     k
                                                                                            11365
                                                                                                           98
                                                                     V : (1,-1,5)
                                                                     k
                                                                                                                     Non-empty voxel 
                                                                                            17958
                                                                                                           110
                                                                       ...
                                                                                            18331
                                                                                                            -1
                                                                                                                       Empty voxel 
                                                                                            20155
                                                                                                          20155
                                                                    V : (-1,-1,5)
                                                                     k
                                                                                              ...
                                                                                                            ...
                                                                                              V
                                                                                                one
                                                                                                            J
                                                             Self-attenting index V
                                                                                 k
                   Figure 3. Illustration of rapid query on voxels
                   Theredgridrepresents the queried voxel, while the yellow and green grids, respectively, indicate the non-empty voxels and empty voxels participating in the
                   attention process, as determined by the ripple-spread center-emanating attention.
                   4      iScience 27, 110759, September 20, 2024

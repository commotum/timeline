                                8                                                                                                                                                  Transactions of the Institute of Measurement and Control 00(0)
                                Figure 2. The details of the retentive decay matrix computation of RSCA. Different shades of blue squares represent the weights of the multi-
                                dimensional features corresponding to the BEV grid in the RSCA calculation, with darker shades indicating larger weights.
                                                 points in the 2D image, with their significance                                                                                    cross-attention for multiple data types, clarifies their respec-
                                                 weighted according to the decay matrix Dnm2d. The                                                                                  tive roles and methodologies.
                                                 aggregation of these weighted features then forms the
                                                 output for spatial feature aggregation, efficiently sum-                                                                           TSA
                                                 marizing the expansive spatial information while
                                                 mindful of computational efficiency.                                                                                               RetentiveBEV utilizes RNN to derive temporal BEV fea-
                                                                                                                                                                                    tures, facilitating the representation and estimation of
                                                                                                                                                                                    object velocities, as well as the detection of objects obscured
                                        Steps below can be represented as                                                                                                           by height differences. For the BEV query vector Q at a
                                                                                                                                                                                    given timestamp t, and the historical BEV feature B
                                                                                            N                                                                                                                                                                                                                            t1
                                               ref                                                                                
                                                                           1       P P                                                                                 i            stored at timestamp t 1, the process begins with calculat-
                                  RSCA Q ,F =                                                       RetentiveAttn Q ,PðÞp,i,j ,F
                                                     p      t            V                                                                p                            t
                                                                        jj
                                                                            hit  i2V       j =1                                                                                     ing the vehicle’s relative displacement between these two
                                                                                       hit
                                                                                                                                                                     ð9Þ            time points within the ego car’s coordinate system. This cal-
                                                                                                                                                                                    culation is based on the motion data gathered from the
                                wherein, the Q is the query according to the reference point                                                                                        vehicle itself. The aim is to align the historical BEV feature
                                                                  p                                                                                                                 B          with the query vector Q, ensuring that the BEV grids
                                p, and the P is the projection with index i,j between p and                                                                                            t1
                                extracted feature Fi.                                                                                                                               for both timestamps correspond accurately to the same
                                                                           t                                                                                                        locations in physical space. The resulting aligned historical
                                                                                                                                                                                                                                                     0
                                                                                                                                                                                    BEVfeature is denoted as B t1. Subsequently, a mechanism
                                        MaSA and RSCA. The relationship between RSCA (a                                                                                             of TSA is introduced to establish a connection between fea-
                                cross-attention mechanism) and MaSA (a self-attention                                                                                               tures from different timestamps within the same BEV grid,
                                mechanism) is defined within the context of training pro-                                                                                           post alignment. This TSA mechanism highlights the signifi-
                                cesses, where RSCA simultaneously handles inputs from both                                                                                          cance of temporal dynamics in understanding the spatial
                                2D surround images and LiDAR point cloud ground truths.                                                                                             arrangement and movement of objects over time
                                In this setup, the query (Q) is derived from 2D surround                                                                                                                                                                                                     
                                images, while the keys (K) and values (V) originate from the                                                                                            TSA Q , Q,B0                                  = P DeformAttn Q ,p,V #
                                                                                                                                                                                                       p                 t1                               0                                           p
                                                                                                                                                                                                                                             V2 Q,B
                                                                                                                                                                                                                                                  fg
                                LiDAR point cloud data. For images undergoing RSCA,                                                                                                                                                                         t1
                                decay weights D are computed exclusively based on the                                                                                                                                                                                                                                 ð10Þ
                                image itself, embodying MaSA’s principle. Essentially, MaSA
                                functions as a component of RSCA, focusing solely on                                                                                                       Herein, Q is a BEV query vector positioned at the coordi-
                                                                                                                                                                                                                 p
                                inputs from surround-view images during training. In                                                                                                                                                                                                                    0
                                contrast, RSCA integrates inputs from two distinct sources.                                                                                         nates p=(x,y). For the initial frame, the pair fQ,B t1g tran-
                                This delineation between the two, with MaSA leveraging self-                                                                                        sitions to fQ,Qg, indicating that at the start, both the current
                                                                                                                                                                                    and historical BEV features are considered to be the same,
                                attention for singular input sources and RSCA employing                                                                                             essentially treating the initial query vector Q as its own

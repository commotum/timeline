                                                                                                                    Layer Ì†µÌ±Å
                                                                                              r 1                                                      r             LN
                                                                                                                                            ‚Ä¶
                                                                                              Laye‚Ä¶ LN              MSA        LN     MLP              Laye          Last       MLPHead
                                                                Position     Token  
                                                              Embedding Embedding                              Visualization                      Visualization
                                                         Layer1                     Layer4                     Layer7                     Layer9                    Layer11                  After Last LN
                                      Token  
                                   Embedding
                                                             +                          +                          +                         +                          +                            +
                                     Position
                                   Embedding
                                   Ì†µÌ∞ÇÌ†µÌ∞®Ì†µÌ∞´Ì†µÌ∞´Ì†µÌ∞ûÌ†µÌ∞•Ì†µÌ∞öÌ†µÌ∞≠Ì†µÌ∞¢Ì†µÌ∞®Ì†µÌ∞ß   -0.37                     -0.67                     -0.82                        -0.85                     -0.95                       -0.70
                                                                                                   (a) Layer-wise with PE in Last LN
                                                                                                                    Layer Ì†µÌ±Å
                                                                                               r 1                                                     r             LN                      After Last LN
                                                                                                                                            ‚Ä¶
                                                                        +                      Laye‚Ä¶ LN              MSA       LN     MLP              Laye          Last        MLPHead    Token Embedding
                                                              Position      Token                              Visualization                        Visualization
                                                            Embedding Embedding
                                                 Layer1                      Layer4                      Layer7                      Layer9                     Layer11                              +
                                                                                                                                                                                           Position Embedding
                                                                                                                                                                                                   -0.19
                                                                                         (b) Original with PE in Last LN (Non-Layer-wise)
                       Figure 8: The difference between delivering PE to the Last LN in Non-Layer-wise and Layer-wise structures. In (a), PE is
                       delivered to the Last LN within a Layer-wise structure, while in (b), only PE is delivered to the Last LN in a Non-Layer-wise
                       structure.
                                             Dataset                             Model           Learning Rate            Scheduler           Weight Decay             Batch Size           Epochs         Warm-upEpochs
                                                                                  DeiT                  5e-4                 cosine                  0.05                  1024               300                      5
                                        ImageNet-1K                               Swin                  1e-3                 cosine                  0.05                  1024               300                     20
                                     (Denget al. 2009)                            CeiT                  5e-4                 cosine                  0.05                  1024               300                      5
                                                                               T2T-ViT                  1e-3                 cosine                  0.03                   512            300+10                     10
                                          CIFAR-100                            ViT-Lite                 6e-4                 cosine                  0.06                   128            300+10                     10
                           (Krizhevsky, Hinton et al. 2009)                    T2T-ViT                  5e-2                 cosine                  5e-4                   128                60                      -
                                                   Table 7: Hyperparameter settings for image classification on ImageNet-1K and CIFAR-100.
                                 Dataset                      Model                 Framework              Backbone            Crop       Optimizer            LR        Scheduler          Weight Decay             Batch Size
                                                                                                            Prei-train         Size
                             COCO2017                  ViT-Adapter-Ti             MaskR-CNN                  DeiT-Ti           1024         AdamW             1e-4        3x+MS                    0.05                     8
                           (Lin et al. 2014)
                                                                     Table 8: Hyperparameter settings for object detection on COCO 2017.
                                  Dataset                       Model                Framework            Backbone           Crop        Optimizer            LR         Scheduler          Weight Decay             Batch Size
                                                                                                          Prei-train          Size
                                 ADE20K                   ViT-Adapter-Ti               UperNet              DeiT-Ti           512         AdamW             12e-5           160K                   0.01                     8
                           (Zhou et al. 2019)
                                                                  Table 9: Hyperparameter settings for semantic segmentation on ADE20K.

                                                                               increase in PPL once the context window is exceeded. Additionally, the similarity between positional
                                                                              vectors within and beyond the context window decreases, highlighting the relationship between length
                                                                               extrapolation and the stability of positional representations.
                                                                               Furthermore, we assess the impact of OOD positional vectors. We analyze the attention scores
                                                                               of initial tokens and the positional vectors of output logits within and beyond the context window.
                                                                              As demonstrated in Table 8, exceeding the context window results in the loss of the attention
                                                                               sinking property, and the positional vectors of the logits exhibit a different distribution compared to
                                                                               those within the context window. This suggests that OOD positional vectors influence the model’s
                                                                               distribution. Moreover, OOD positional encodings play a crucial role in large language models
                                                                              (LLMs)that leverage RoPE [15].
                                                                               F.4             Experiments of Positional Vector Replacement
                                                                              Toassess whether our positional vector replacement method is specific to TL-NoPE, we applied it to
                                                                              TL-NoPE-new,whichwastrainedfromscratch. We evaluated its language modeling performance
                                                                               on the PG-19 dataset, using the same experimental setup as TL-NoPE. As shown in Table 9, our
                                                                               approach effectively extends the context window to 8K tokens and achieves performance comparable
                                                                               to attention scaling.
                                                                                                                          Table 9: Results of language modeling in PG-19 with TL-NoPE-new
                                                                                                Interpolation Method                                                                                               Factor                                     2048                    4096                     6144                       8192
                                                                                                -                                                                                                                  -                                           29.0                  110.7                    634.8                    1078.5
                                                                                                Attention Scaling                                                                                                  1.2                                         29.0                     27.3                         -                          -
                                                                                                                                                                                                                   1.5                                         36.8                    41.6                     44.4                       46.2
                                                                                                Positional Vector Replacement(ours)                                                                                r=2.5,α=0.8                                 32.8                    29.5                          -                          -
                                                                                                                                                                                                                   r=5, α=0.8                                  57.4                    50.8                     40.0                       44.2
                                                                               G Visualization of Positional Vectors
                                                                              Wevisualize all models listed in Table 1 with PCA. The subsequent figures present the visualization
                                                                               of TL-NoPE, TL-RoPE, TL-ALiBi, TL-Window, TL-Window-RoPE, and TL-Window-80.
                                                                                                              Layer 1                             Layer 2              1200           Layer 3                             Layer 4                             Layer 5                             Layer 6                             Layer 7
                                                                                                600                                 175                                                                     100                                 100
                                                                                                500                                 150                                1000                                                                                                         150                                 150
                                                                                                                                    125                                                                      75                                  75
                                                                                                400                                                                     800                                  50                                                                     100                                 100
                                                                                                300                                 100                                                                                                          50
                                                                                                200                                  75                                 600                                  25                                  25                                  50                                  50
                                                                                                100                                  50                                 400                                   0                                   0
                                                                                                                                     25                                                                                                                                               0                                   0
                                                                                                  0                                                                     200                                  25                                  25
                                                                                                100                                   0                                                                      50                                  50                                  50                                  50
                                                                                                                                     25                                   0
                                                                                                      0    250   500   750   1000       50    25   0   25   50    75            50     0     50     100             40   20   0   20   40    60         40   20   0    20   40              40   20   0    20   40              40   20   0    20    40
                                                                                                              Layer 8                             Layer 9                            Layer 10                            Layer 11                            Layer 12               100          Layer 13                            Layer 14
                                                                                                100                                                                      80                                 100                                  80
                                                                                                 75                                  75                                  60                                  75                                                                      80                                  80
                                                                                                                                     50                                                                                                          60
                                                                                                 50                                                                      40                                  50                                  40                                  60                                  60
                                                                                                 25                                  25                                  20                                  25                                  20                                                                      40
                                                                                                  0                                   0                                   0                                   0                                                                      40
                                                                                                                                                                         20                                                                       0                                  20                                  20
                                                                                                 25                                  25                                                                      25                                  20
                                                                                                 50                                  50                                  40                                  50                                                                       0                                   0
                                                                                                                                                                         60                                                                      40
                                                                                                 75                                  75                                  80                                  75                                  60                                  20                                  20
                                                                                                        40   20   0    20    40              40   20   0    20   40              40   20   0   20    40             40    20   0   20    40             40    20  0    20   40   60         40    20  0    20   40   60          40   20  0    20   40   60
                                                                                                             Layer 15                            Layer 16                            Layer 17                            Layer 18                            Layer 19                            Layer 20                            Layer 21
                                                                                                 80                                  80                                  80                                  80                                  80                                  80                                  80
                                                                                                 60                                  60                                  60                                  60                                  60                                  60                                  60
                                                                                                 40                                  40                                  40                                  40                                  40                                  40                                  40
                                                                                                 20                                  20                                  20                                  20                                  20                                  20                                  20
                                                                                                  0                                   0                                   0                                   0                                   0                                   0                                   0
                                                                                                 20                                  20                                  20                                  20                                  20                                  20                                  20
                                                                                                         40   20   0   20   40   60        50    25    0     25    50          50    25    0    25    50          50    25    0     25    50           50    25    0    25    50           50    25    0    25    50           50    25   0     25    50
                                                                                                       Figure 12: PCA visualization of positional vectors at different layers of TL-NoPE.
                                                                                                                                                                                                                          20

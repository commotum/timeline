                      Input v     Input v       Output
                             1           2                                        repetitive task (i.e., ﬁlls in the bold entries). We highlight
                      Stroller    10/12/2010    $145.67+0.30*145.67               below the key technical challenges involved.
                      Bib         23/12/2010    $3.56+0.45*3.56
                      Diapers     21/1/2011     $21.45+0.35*21.45                 Expressive transformation language. The transforma-
                      Wipes       2/4/2009      $5.12+0.40*5.12                   tion/program inferred by our system for automating the
                      Aspirator   23/2/2010     $2.56+0.30*2.56                   repetitive task involves both lookup and syntactic opera-
                         MarkupRec                        CostRec                 tions. In particular, note that we need lookup operations
                 Id     Name        Markup       Id      Date      Price          for (i) obtaining the markup percentage from an item name
                 S30    Stroller    30%          S30     12/2010   $145.67        in MarkupRec table (Stroller → 30%) and (ii) for obtaining
                 B56    Bib         45%          S30     11/2010   $142.38        the purchase price of item in CostRec table after perform-
                 D32    Diapers     35%          B56     12/2010   $3.56          ing a join operation between the two tables on the item
                 W98 Wipes          40%          D32     1/2011    $21.45         Id column (Stroller,12/2010 → $145.67). Observe that the
                 A46    Aspirator   30%          W98 4/2009        $5.12          string 12/2010 used for performing the second lookup is ob-
                 · · ·  · · ·       · · ·        A46     2/2010    $2.56          tained by performing a syntactic transformation (namely, a
                                                 · · ·   · · ·     · · ·          substring operation) on the input string 10/12/2010. After
              Figure 1: A transformation that requires perfoming                  performing the lookups, we need a syntactic transforma-
              syntactic manipulations on multiple lookup results.                 tion (namely, a concatenate operation) to concatenate the
                 We also describe a systematic design of the synthesis al-        lookup outputs with constant strings like +,0.,* in a par-
              gorithm for the semantic string transformation language,            ticular order to generate the ﬁnal output string. We present
              which can synthesize a set of semantic transformations that         anexpressive transformation language that combines lookup
              are consistent with the given set of input-output examples.         and syntactic transformations in a nested manner.
              Weﬁrst describe a synthesis algorithm for the lookup trans-         Succinctrepresentation&efﬁcientcomputationoflarge
              formation language L , and then extend it to a synthesis
                                     t                                            number of consistent transformations. The number of
              algorithm for the extension of L with syntactic transfor-
                                                 t                                expressions in our expressive transformation language that
              mations. Experimental results on our benchmark examples             are consistent with a given input-output example can poten-
              show that our algorithm is scalable and can learn desired           tially be very large. For example, for the ﬁrst input-output
              transformations from very few examples.                             example(Stroller, 10/12/2012→$145.67+0.30*145.67),
                 This paper makes the following key contributions:                there are a large number of transformations that can gen-
               • Wedescribe a lookup transformation language L and an
                                                                   t              erate the output string. In general, every substring in the
                 inductive synthesis algorithm for it (§4).                       output string can potentially be either a constant string, or
               • We observe that most semantic transformations can be             a substring of an input string, or the result of a lookup op-
                 expressed as combination of lookup and syntactic trans-          eration. For example, the substring 30 in the output string
                 formations. We extend language L with syntactic trans-           can either be a constant string or a string obtained by per-
                                                     t
                 formations to obtain a very expressive language L      and       forming a lookup operation in the MarkupRec or CostRec
                                                                      u
                 describe an inductive synthesis algorithm for it (§5).           table. Some of the possible lookup transformations to ob-
               • We describe an experimental prototype of our system              tain the string 30 include selecting the Markup column entry
                 that has an attractive user-interface and is ready to be         in the MarkupRec table where the item Name in the corre-
                 deployed. We present the evaluation of our prototype             sponding row is either one of the constant strings Stroller
                 on a large collection of benchmarks obtained from help-          or Aspirator, or it matches the input string v . Another
                                                                                                                                   1
                 forums, books, mailing lists and Excel product team (§7).        valid lookup transformation is to select the last two charac-
                 This paper is organized as follows. §3 establishes a com-        ters from the item Id column (S30) in MarkupRec or CostRec
              monframeworkfordescribing transformation languages and              table with various ways to select the ﬁrst row by constrain-
              their inductive synthesis algorithms.    §4 and §5 describe         ing the item Name or Date columns respectively. We thus
              novel instantiations of this framework for a lookup trans-          have a large number of possible transformations for each
              formation language and for its extension with a syntactic           substring of the output string and explicit enumeration of
              transformation language. §6 shows applications of the se-           all such choices becomes infeasible. A key technical contri-
              mantic transformation language (described in §5) for per-           bution of this paper is a data structure that can succinctly
              forming transformations on standard data types.                     represent an exponential number of such transformations in
                                                                                  polynomial space, and an algorithm that can compute such
              2.    MOTIVATINGEXAMPLE                                             transformations in polynomial time. The key idea is to share
                                                                                  common sub-expressions and compute/maintain choices for
                 Consider the following example from an Excel help-forum.         independent sub-expressions independently.
                 Example 1. Ashopkeeperwantedtocomputetheselling                  Ranking. Our synthesis algorithm learns the set of all con-
              price of an item (Output) from its name (Input v1) and              sistent transformations for each example and then intersects
              selling date (Input v2) using the MarkupRec and CostRec             these sets to obtain the common transformations. The num-
              tables as shown in Figure 1. The selling price of an item is        ber of examples required to converge to the desired trans-
              computed by adding its purchase price (for the corresponding        formation may be large. To enable learning of the desired
              month) to its markup charges, which in turn is calculated by        transformation from very few examples, we perform a rank-
              multiplying the markup percentage by the purchase price.            ing of these learned transformations that gives preference to
                 The user expresses her intent by giving a couple of exam-        transformations that are smaller (Occam’s razor principle)
              ples (i.e., the ﬁrst two rows). Our tool then automates the         and that use fewer constants (to enforce generalization).
                                                                             741

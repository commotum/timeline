                     pens, with some probability we replace the text                       angular and diamond shapes and increased the
                     with action K repeats. Given the long-context                         difficulty compared to the problems in Spacial-
                     nature of the problem, the model requires to have                     LLMEval by increasing the number of hops of
                     the ability to remember information from many                         reasoning (corresponding to the number of moves
                     steps ago to be able to identify what that action                     of the agent). Moreover, while the original prob-
                     corresponded to.                                                      lems and the aforementioned problems we created
                         Anaiveapproachtotheprobleminthesetasks                            mainly require keeping track of the state after each
                     is to look at the switch operations one by one and                    move, we also create some variants of the problem
                     keep updating the object/person assigned to each                     where we provide multiple paths that intersect at
                     of the N people. This, however, will require track                    some vertex, thus requiring backward reasoning
                     keeping over a very large number of operations.                       from the intersection point to identify the position
                     While reasoning-specialized models might still be                     of the previous objects. As an example, consider
                     able to do this thanks to their long outputs, this may                the problem below:
                     be less feasible for the general-purpose models,
                     and it is not the optimal solution to the problem.                        SampleProblemRequiring Backward Rea-
                     Amoreclever approach to the problem is to first                           soning
                     identify all the operations that cancel each other
                     out, and then do the track keeping only over the                          You have been given a diamond tile map
                     few operations that do not cancel.                                        consisting of N rows [...] There is a unique
                         Looking at some model traces, we observe that                         object placed at each vertex. [...] You are
                     the models typically adopt the non-optimal ap-                            initially at the top corner where you see a
                     proach of updating the state after each switch, thus                      football. Then you movedown-rightforone
                     running out of output tokens in some cases. For ex-                       step and see a shampoo. Then you move
                     ample, Gemini 2.0 Flash runs out of output tokens                         down-leftforonestepandyouseeacat. [...]
                     for 25% of the problems. We also observe a sec-                           Then,youjumptoarandomvertexVwhere
                     ondfailure case where, if the question asks about                         you see a bear. Then you move [...] Then
                     the person/object assigned to Person P at the end,                        you move up-left and you see a shampoo.
                     the model assumes only switches involving Person                          Then you jump back to the random vertex
                     Pare important and other switches are irrelevant.                         Vanddothefollowing moves: down-left,
                     This is, however, not True. To understand why,                            down-left, down-right, up-left, down-left,
                     suppose "A" is assigned to "a", "B" is assigned to                        up-left. What will you find?
                     "b", and "C" is assigned to "c". Then "A" and "B"
                     switch and then "B" and "C" switch, and then we                          Forthefirst path (up until the first random jump),
                     want to know what "C" is assigned to. If we only                     weknowwherethepathstartsandwecanusethat
                     consider the switches involving "C", then we may                      alongwiththefollowingmovestodeterminewhich
                     predict the correct answer to be "b" whereas the                      object is where. Then, a random jump is made
                     correct answer in this case is "a".                                   to a vertex V but it is not specified which vertex
                     A.17      Spatial Reasoning                                           it is.  However, we observe that after a number
                     This task is mainly based on the problems in Spa-                     of moves, the agent sees the shampoo again so it
                     cialLLMEval (Yamada et al., 2023). The problems                       can reason backward from this point to figure out
                     describe a geometric construct composed of verte-                    which vertex it has been at in the previous steps.
                     cies and edges. At each vertex, there is a unique                    These information can also be used to determine
                     object. An agent starts from one of the vertecies,                    the vertex V which must then be used to solve the
                     movesalongtheedgesandobserves the objects at                          problem when the second jump to V is made.
                     several vertices, and then after moving for several                      Wefind that the problems involving backward
                     steps along the edges, the job of the model is to                     reasoning are more challenging for the models.
                     determine what object is at the final vertex where                    Specifically, we find that o3-mini (high) gives an ac-
                     the agent stops.                                                      curacy of 58.8% on the forward-only problems and
                         Wesampled from the hexagonal, circular, and                      19.2% on the backward problems and DeepSeek
                     rhombusconstructs of SpacialLLMEval. We also                          R1givesanaccuracyof48.6%ontheforward-only
                     created similar constructs with tree structure, tri-                  problems and 3.8% on the backward problems.
                                                                                    26496

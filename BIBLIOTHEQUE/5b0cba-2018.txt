     review articles
                                                                                          DOI:10.1145/3208071
                                                                                                                       that states that for all inputs, there ex-
              A promising, useful tool for future                                                                      ists an output, such that the desired 
              programming development environments.                                                                    correctness specification holds. 
                                                                                                                       Building automated and scalable 
              BY RAJEEV ALUR, RISHABH SINGH,                                                                           tools to solve this problem has proved 
              DANA FISMAN, AND ARMANDO SOLAR-LEZAMA                                                                    to be difficult. A recent alternative to 
                                                                                                                       formalizing synthesis allows the pro-
                                                                                                                       grammer to supplement the logical 
                                                                                                                       specification with a syntactic tem-
                                                                                                                       plate that constrains the space of al-
            Search-based  lowed implementations and the solu-
                                                                                                                       tion strate gies focus on search 
                                                                                                                       algorithms for efficiently exploring 
                                                                                                                       this space. The resulting search-based 
            Program                                                                                                    program synthesis paradigm is emerg-
                                                                                                                       ing as an enabling technology for 
                                                                                                                       both designing more intuitive pro-
                                                                                                                       gramming notations and aggressive 
            Synthesis                                                                                                  program optimizations.
                                                                                                                           As an instance of making program-
                                                                                                                       ming easier and accessible to end 
                                                                                                                       users, consider the programming-by-
                                                                                                                       examples (PBE) systems that allow a 
                                                                                                                       user to specify the desired functional-
                                                                                                                       ity using representative input-to-out-
                                                                                                                       put examples. Such a programming 
                                                                                                                       environment is feasible in domain-
            Writing programs that are both correct and efficient is                                                    specific applications such as data 
                                                                                                                       manipulation as illustrated by the 
            challenging. A potential solution lies in program                                                          success of the FlashFill feature in  
                                                                                                                       Microsoft Excel spreadsheet soft-
            synthesis aimed at automatic derivation of an                                                                      10, 11
                                                                                                                       ware.        This feature can automati-
            executable implementation (the “how”) from a high-                                                         cally fill in a column in the spreadsheet 
            level logical specification of the desired input-to-                                                       by examining a few examples pro-
            output behavior (the “what”). A mature synthesis                                                           vided by the user. The underlying 
                                                                                                                       computational problem is search-
            technology can have a transformative impact on                                                             based synthesis, namely, finding a 
            programmer productivity by liberating the programmer                                                       program that is consistent with all the 
                                                                                                                       user-provided examples and fits the 
            from low-level coding details. For instance, for the                                                       syntactic template of the native 
            classical computational problem of sorting a list of                                                       language.
            numbers, the programmer has to simply specify that                                                               key insights
            given an input array A of n numbers, compute an                                                            ˽  Syntex-guided synthesis formalizes the 
            output array B consisting of exactly the same numbers                                                         computational problem of searching for 
                                                                                                                          a program expression that meets both 
            as A such that B[i] ≤ B[i + 1] for 1 ≤ i < n, leaving it to the                                               syntactic and logical constraints.
            synthesizer to figure out the sequence of steps needed                                                     ˽  A wide variety of problems, such as 
                                                                                                                          programming by examples, program                    OCK.COM
            for the desired computation.                                                                                  superoptimization, and program repair,              T
               Traditionally, program synthesis is formalized as                                                          naturally map to syntax-guided synthesis.
                                                                                         17                            ˽  Standardization, benchmark collection, 
            a problem in deductive theorem proving:  A program                                                            and solver competition have led 
                                                                                                                          to significant advances in solution                 GE FROM SHUTTERS
            is derived from the constructive proof of the theorem                                                         strategies and new applications.                    IMA
            84    COMMUNICATIONS OF THE ACM   |  DECEMBER 2018  |  VOL. 61  |  NO. 12
                                                           DECEMBER 2018 |  VOL. 61  |  NO. 12  |  COMMUNICATIONS OF THE ACM    85
     review articles
            A traditional optimizing compiler      replacing f by e in Spec results in a  Syntax-Guided Synthesis
         transforms the input program by  valid formula. The input format for  The SyGuS problem is to find a func-
         applying a sequence of transforma-        this problem has been standardized,       tion f that meets the specified syntac-
                                                                                                                             2 The 
         tions where each transformation  hundreds of benchmarks from differ-                tic and semantic constraints.
         makes a local change to the program       ent application domains have been  syntactic constraint is given as a 
         that is guaranteed to preserve seman-     collected, and a competition of solv-     grammar deriving a set Exp of expres-
         tic equivalence. An alternative, based    ers has been held annually starting  sions that captures the candidate 
         on search-based synthesis, is to  2014 (see www.sygus.org). This  implementations of f. The semantic 
         explore the space of syntactically cor-   community effort has led to innova-       constraint is a logical formula Spec 
         rect programs for a program that is  tions in both computational tech-              that captures the desired functional-
         semantically equivalent to the input      niques for solvers and practical  ity of f. We introduce the problem 
         program and meets desired perfor-         applications.                             using a series of illustrative examples 
         mance criteria (for example, uses an         In this article, we introduce the  from different applications.
         expensive operation only a limited  SyGuS problem using four applica-                 Synthesis from logical specifica-
         number of times). This approach  tions: synthesis from logical specifica-           tions. A logical specification of a func-
         offers the possibility of more aggres-    tions, programming      by examples,  tion describes what needs to be 
                                                   program transformation, and auto-         computed. As a simple example, con-
         sive optimization—sometimes 
         called  superoptimization, as it can  matic inference of program invariants.        sider the following specification Spec  
                                                                                                                                   1
         lead to a resulting program that is  Next, we discuss a generic architecture        of a function f that takes two input 
         structurally quite dissimilar to the  for solving the SyGuS problem using  arguments  x and y of type int and 
                       18,26                       the iterative counterexample-guided  returns an integer value that is the 
         original one.
                                                                                        29
            Since the number of syntactically  inductive synthesis (CEGIS) strategy          maximum of the input arguments:
         correct programs grows exponentially      that combines a search strategy with a 
         with the size, searching through the  verification oracle. As an instance of 
         space of programs is computationally      the learning algorithm, we explain the 
         intractable. Our attempt to tackle this   enumerative technique that generates 
         seemingly hopeless research chal-         the candidate expressions of increas-     Finding a function f satisfying this 
         lenge is rooted in two lessons learned    ing size relying on the input examples    logical specification can be viewed as 
                                                                32
         from the progress on two analogous,       for pruning.  We then describe the  establishing the truth of the quanti-
         computationally intractable, prob-        standardized input format, the bench-     fied formula: ∃ f. ∀ x, y. Spec1. A con-
         lems in formal analysis: model check-     marks, and the annual competition of      structive proof of this formula can 
         ing that requires exploration of  solvers. This infrastructure effort               reveal an implementation of f.17 Since 
         reachable states of finite-state mod-     was supported by NSF Expeditions   automatic proofs in a logic that sup-
                         4 and constraint solving                                            ports quantification over functions 
         els of protocols                          in Computing project ExCAPE 
         to find a satisfying assignment to vari-  (Expeditions in Computer-Augmented        remains a challenge, the syntax-
         ables in a logical formula with Boolean   Program Engineering) focused on  guided approach we advocate asks the 
                      5,16 First, a sustained 
         connectives.                              advancing tools and applications of  user to specify additional structural 
         focus on battling the computational  program synthesis. We close by exam-           constraint on the set of expressions 
         bottlenecks via algorithmic innova-       ining the resulting progress. In partic-  that can be used as possible imple-
         tions, data structures, and perfor-       ular, we explain how the best mentations of f. For example, the fol-
         mance tuning can result in impressive     performing solver in the 2017 compe-      lowing grammar specifies the set Exp  
                                                                                                                                   1
         advances in tools. Second, even when      tition integrates decision trees in the   of all linear expressions over input 
         the tools have scalability limits, they   enumerative search algorithm to boost     arguments  x and y with positive 
         can still prove invaluable in practice    its performance,3 and discuss a new  coefficients:
         when applied to carefully chosen real-    application of SyGuS to automatically 
         world problems.                           make cryptographic circuits resilient 
                                                                     7
            While search-based synthesis is  to timing attacks.
         the computational problem at the             It should be noted that search-        Now the computational problem is to 
         core of a number of synthesis projects    based program synthesis is an active      systematically search through the set 
         dating back to the system Sketch for      area of research with tools and appli-    Exp1 of expressions to find an expres-
         program completion,28,29 the precise  cations beyond the specific formal-           sion e such that the formula obtained 
         formulation we focus on is called syn-    ization we focus on. While space does     by substituting e for f (x, y) in Spec  is 
                                                                                                                                1
         tax-guided synthesis (SyGuS):2 Given a    not permit a detailed discussion of  valid. Convince yourself that there is 
         set Exp of expressions specified by a     the related work, let us mention a   no solution in this case: no linear 
         context-free grammar that captures  few relevant trends: type-based expression over two integers can cor-
                                                                                     14,21,22
         the set of candidate implementations      approaches to code completion,            respond to the maximum of the two.
         of an unknown function f, and a logi-     use of statistical models learnt from       Since no linear expression satisfies 
         cal formula Spec that captures the  code repositories for program synthe-           the specification, we can enrich the 
                                                      24 and search-based program 
         desired functionality of f, find an  sis,                                           set of candidate implementations by 
                                                          15,19
         expression  e in Exp such that  repair.                                             allowing conditionals. The following 
         86    COMMUNICATIONS OF THE ACM   |  DECEMBER 2018  |  VOL. 61  |  NO. 12
                                                                                                                                   review articles
            grammar specifies this set Exp :                 String transformation by examples.             an overflow error. If the input num-
                                                2
                                                                                                            bers are bitvectors of length 32, an 
                                                               Input                 Output                 alternative correct formulation can 
                                                               Nancy FreeHafer       FreeHafer, N.          first extend the given numbers to 
                                                                                                            64-bits to make sure that no overflow 
            Here the nonterminal T generates lin-              Andrew Cencini        Cencini, A.            error will be introduced when they are 
            ear expressions, the nonterminal C                 Jan Kotas             Kotas, J.              summed up together, then divide by 
            generates tests used in conditionals,                                                           2, and finally convert the result back 
            and for a test t and expressions e1 and                                                         to 32-bits. This is specified by the 
            e , ITE(t, e , e ) stands for if t then e          The set of string transformations  function:
             2           1   2                          1
            else e . Now f(x, y) = ITE((x ≤ y), y, x)       supported by the domain specific lan-
                  2
            satisfies the logical specification  guage of Excel can be specified by the 
            Spec  and also belongs to the set Exp .         grammar below (simplified for 
                 1                                     2
            Observe that this expression does not           exposition):                                    where the operator bv  converts a 
                                                                                                                                         64
            involve addition of terms and thus                                                              32-bitvector to a 64-bitvector by con-
            can also be generated by the following                                                          catenating 32 zeros to its left, and bv  
                                                                                                                                                       32
            simpler grammar that specifies the                                                              converts a 64-bitvector to a 32-bitvec-
            set Exp  of expressions:                                                                        tor by taking the 32 rightmost bits.
                     3
                                                                                                               Since the result does not require 
                                                                                                            more than 32-bits, we want to know if 
                                                            In this grammar, the nonterminal E              there exists an equivalent solution 
                                                            generates string transformations, that works without using an extension 
            Now suppose we change the logical  and the nonterminal I generates inte-                        to 64-bits. We can pose this as a SyGuS 
            requirement of the desired function f           ger-valued index expressions. The  question: does there exist an expres-
            from Spec  to Spec :                            Concat(s ,  s ) function returns the  sion that is equivalent to f (x, y) and is 
                        1        2                                      1   2
                                                            concatenation of the strings s1 and s2,         generated by the grammar:
                                                            SubStr(s, i1, i2) returns the substring 
                                                            of the string s between the integer 
            Observe that this is an under-specifi-          positions i1 and i2, Len(s) returns the 
            cation since multiple functions can  length of the string s, and IndexOf (s1, 
                                                                                               th
                                                            s , i) returns the index of the i  occur-       where + is addition, &, , ˆ are bitwise 
            satisfy this logical constraint.                 2
            If we choose the set of expressions to          rence of the string s2 in the string s1.        and, or, and xor,  and  are shift 
            be  Exp , a possible solution is                   A possible solution to the SyGuS  left and shift right, N is the set of inte-
                      2
            f (x, y) = ITE( (x ≤ y), y, x) + 1. However,    problem is: Concat(s1, “,”, s2, “.”),  ger constants between 0 and 31. Note 
            this solution will no longer work if the        where s1 is the expression SubStr(s,            that the grammar explicitly rules out 
            set of expressions is Exp . This ability        IndexOf(s, “  ”, 1) + 1, Len(s) ) and s  is     the use of bitvector conversion opera-
                                         3                                                           2
            to change the specification of the  SubStr(s, 0, 1). This program concat-                       tors bv  and bv  used in the original 
                                                                                                                    64         32
            desired function by revising either the         enates the following four strings: the          program f. A correct solution to the 
            logical formula or the set of expres-           substring in the input string starting          synthesis problem is the program
            sions offers a significant convenience          after the first whitespace; constant 
            in encoding synthesis problems.                 string “,”; the first character; and con-
               Programming by examples. An  stant string “.”.
            app ealing application of synthesis is             Program optimization. In auto-                  Template-based invariant synthe-
            to learn a program from representa-             matic program optimization, we are  sis. To verify that a program satisfies 
            tive input-to-output examples. The  given an original program f, and we  its correctness specification, one 
            Flash-Fill feature in Microsoft Excel is        want to find another program g such             needs to identify loop invariants—
            a recent success of such a program-             that the program g is functionally  conditions over program variables 
                                                  10,11
            ming methodology in practice.              It   equivalent to f and satisfies specified         that are preserved by an execution of 
            allows Excel users to perform string  syntactic constraints so it has better                    the loop. As a simple example con-
            transformations using a small num-              performance compared to f. The syn-             sider the following program, where i, 
            ber of input-to-output examples. For            tactic constraint can be used to rule           j, m, and n are integers:
            example, consider the task of trans-            out, or restrict, the use of certain oper-
            forming names from one format to  ations deemed expensive.
            another as shown in Table 1. Formally,             As an example, consider the prob-
            the semantic constraint on the desired          lem of computing the average of two 
            function f from strings to strings is  un  signed integer input numbers x 
            given by the formula with a conjunct            and y represented as bitvectors. The 
            for each of the rows, where the con-            obvious expression (x + y)/2 is not a 
            junct for the first row is of the form          correct implementation since the 
            f (Nancy FreeHafer) = FreeHafer, N.             intermediate result (x + y) can cause 
                                                                                         DECEMBER 2018 |  VOL. 61  |  NO. 12  |  COMMUNICATIONS OF THE ACM    87
     review articles
            Figure 1. Architecture of SyGuS solver.                                                          Solving Sygus
                                                                                                             Given a set Exp of expressions speci-
                                  Initial                                                                    fied using a grammar, and a logical 
                                examples                                                                     formula  Spec that constrains the 
                                                                                                             desired function f, the SyGuS problem 
                                                                                                             is to find an expression e in Exp such 
                                                     Candidate                                               that the formula Spec[f/e] obtained by 
                                                    expression                                               replacing f with e in Spec is valid or 
                                 Learner                                   Veriﬁer                           report failure if no such expression 
                                                 Counterexample                                              exists. This search involves an alter-
                                                                                                             nation of quantifiers: there exists an 
                                                                                                             expression e in Exp such that for all 
                                   Fail                                    Success                           inputs, Spec[f/e] holds. The architec-
                                                                                                             ture underlying current solvers 
                                                                                                             involves a cooperation between a 
            Figure 2. Illustrative execution of CEGIS.                                                       learning module that searches for a 
                                                                                                             candidate expression and a verifica-
                              Iteration    Candidate expression        Counterexample                        tion oracle that checks its validity as 
                                                                                                             explained next.
                                   1                   x                 (x = 0, y = 1)                         Counterexamples and inductive 
                                   2                   y                 (x = 1, y = 0)                      syn thesis. The architecture of a typi-
                                   3                   1                 (x = 0, y = 0)                      cal SyGuS solver is shown in Figure 1 
                                   4                x + y                (x = 1, y = 1)                                    27 for alternative querying 
                                   5          ITE((x ≤ y), y, x)           Success                           (see Seshia
                                                                                                             models). The set Examples contains 
                                                                                                             interesting inputs that the learner 
                                                                                                             uses to guide its search. This set can 
           We want to prove that if m is a non-nega-        A predicate f that satisfies all these  initially be empty. The learner is 
           tive integer then when the program ter-          conditions is an inductive invariant  tasked with finding an expression e in 
           minates j equals m + n; that is, assuming        that is strong enough to prove the cor-          Exp such that Spec[f/e] is satisfied at 
           the pre-condition m ≥ 0, the post-condi-         rectness of the program. A modern  least for the inputs in Examples. If the 
           tion j = m + n holds. To apply the standard      proof assistant for program verifica-            learner fails in this task, then there is 
           verification technology, we need to first        tion asks a user to annotate a program           no solution to the synthesis problem. 
           find a Boolean predicate f over the vari-        with such loop invariants, and then  Otherwise, the candidate expression e 
           ables i, j, m, and n, that must hold every       automatically checks whether all  produced by the learner is given to the 
           time the program control is at line num-         these conditions are satisfied.                  verifier that checks if Spec[ f/e] holds 
           ber 3. The desired predicate f (i, j, m, n)         The more ambitious task of auto-              for all inputs. If so, the current expres-
           should satisfy the following three logical       matically synthesizing loop invariants  sion e is the desired answer to the syn-
           requirements: (1) assuming the pre-con-          that satisfy the desired conditions  thesis problem. If not, the verifier 
           dition, the first time the program con-          can be formalized as a SyGuS prob-               produces a counterexample, that is, an 
                                                                 30
           trol reaches the while loop, the desired         lem.  In the above example, the func-            input for which the specification does 
           predicate f holds:                               tion  f to be synthesized takes four  not hold, and this input now is added 
                                                            integer arguments and returns a  to the set Examples to reiterate the 
                                                            Boolean value. The logical specifica-            learning phase. The learning phase is 
                                                            tion is the conjunction Pre ∧ Induct ∧           an instance of the so-called inductive 
           (2) assuming that f (i, j, m, n) holds,          Post. As a syntactic specification for  synthesis as the learner is attempting 
           and the program enters the while loop            the set of potential candidates for  to generalize based on the current set 
           (that is, the test i > 0 is satisfied), after    invariants, we choose expressions that           Examples of inputs it considers sig-
           executing the body of the loop once,             are conjunctions of linear inequalities          nificant. Since the inputs added to 
           the condition f continues to hold for            over program variables. This set is  this set are counterexamples pro-
           the updated variables:                           expressed by the grammar:                        duced by the verifier, the overall solu-
                                                                                                                                                28,29
                                                                                                             tion strategy is called CEGIS.
                                                                                                                For illustrating this strategy, let us 
                                                                                                             show a plausible sequence of itera-
                                                                                                             tions using the logical specification 
           and (3) assuming that f (i,  j,  m,  n)                                                           Spec  and the set Exp  of linear expres-
                                                                                                                  1                   2
           holds, and the program exits the loop,           The following expression f (i, j, m, n)          sions with conditionals noted previ-
           the post-condition of the program  then is a solution satisfying both syn-                        ously. Initially the set Examples is 
           holds:                                           tactic and semantic constraints:                 empty, and as a result, the learner has 
                                                                                                             no constraints and can return any 
                                                                                                             expression it wants. Suppose it 
           88    COMMUNICATIONS OF THE ACM   |  DECEMBER 2018  |  VOL. 61  |  NO. 12
                                                                                                                                   review articles
            returns x. Now the verifier checks if  learning problem is based on enu-                        and y + y, in that order. Of these, the 
            setting f (x, y) = x satisfies the logical      merating all expressions in Exp one by          first one is equivalent to x, and the 
            specification; that is, it checks               one in increasing order of size, and  next two are equivalent to y, and hence 
            the validity of the formula  
                                                            checking for each one if it satisfies  discarded. The expression y + y is the 
            (x ≥ x) ∧ (x ≥ y) ∧ (x ∈ {x, y}). This for-     Spec for all inputs in Examples. Since          only interesting example of size 3, and 
            mula does not hold for all values of x          the number of expressions grows  the algorithm checks if it satisfies the 
            and  y, and the verifier returns one  exponentially with the size, we need  specification. Indeed that is the case, 
            such counterexample, say, (x = 0, y =           some heuristics to prune the search  and the learner returns y + y. The veri-
            1). This input is added to the set  space. An optimization that turns out                       fier will discover that this solution 
            Examples, and the learner now needs             to be effective is based on a notion of         does not satisfy the specification for 
            to find a solution for f that satisfies         equivalence among expressions with  all inputs, and will generate a coun-
            the specification at least for this  respect to the given set of inputs. Let                    terexample, say, (x = 1, y = 0). Note that 
            input. The learner can possibly return          us say that two expressions e1 and e2           adding this input to Examples changes 
            the expression y, and when the veri-            are  Examples-equivalent if for all  the notion of equivalence of expres-
            fier checks the validity of this answer         inputs in Examples, e1 and e2 evaluate          sions (for instance, the size 1 expres-
            it returns (x = 1, y = 0) as a counterex-       to the same value. Notice that if e is an       sions x and 0 are no longer equivalent), 
            ample. Figure 2 shows the expres-               expression that contains e1 as a subex-         so in the next iteration, the learning 
            sions learnt and the corresponding  pression, and if we obtain e′ by substi-                    algorithm needs to start enumeration 
            counterexamples produced by the  tuting e1 by another expression e2 that                        from scratch.
            verifier in successive iterations. For  is Examples-equivalent to e1, then e′ is                   We conclude the discussion of the 
            instance, in iteration 4, the learner  guaranteed to be Examples-equivalent                     enumerative search algorithm with a 
            attempts to find a candidate solution           to e. As a result, the enumeration algo-        few observations. First, if the set Exp  
            that satisfies the specification for the        rithm maintains a list of only inequiv-         is unbounded, the algorithm may 
            inputs (0, 1), (1, 0), and (0, 0), and f (x,    alent expressions. To construct the  simply keep enumerating expres-
            y) = x + y is indeed such a plausible  next expression, it uses only the  sions of larger and larger size without 
            answer. The verifier then checks the  expressions from this list as potential                   ever finding one that satisfies the 
            validity of (x + y ≥ x) ∧ (x + y ≥ y) ∧ (x +    subexpressions, and as a new expres-            specification. Second, if we know (or 
            y ∈ {x, y}) and returns (x = 1, y = 1) as a     sion is constructed, it first checks if it      impose) a bound k on the depth of the 
            counterexample. In the subsequent  is equivalent to one already in the list,                    expression we are looking for, the 
            iteration, when the learner attempts  and if so, discards it.                                   number of possible expressions is 
            to find a solution that fits all the four          To illustrate the algorithm, sup-            exponential in k. The equivalence-
            inputs currently in Examples, the  pose the logical specification is Spec2,                     based pruning leads to significant 
            shortest expression possible is ITE( (x         the set of expressions is Exp , and the         savings, but the exponential depen-
                                                                                             1
            ≤ y), y, x), which the verifier finds to be     current set of Examples contains a  dence remains. Fin ally, to translate 
            a valid solution.                               single input (x = 0, y = 1) (as noted ear-      the idea described above to an actual 
               Given a candidate solution for the           lier). The job of the learning algorithm        algorithm that works for the set of 
            desired function, checking whether it           is to find an expression e that satisfies       expressions described by a context-
            satisfies the logical specification for         Spec  for x = 0 and y = 1, that is, e(0, 1)     free grammar some fine-tuning is 
                                                                 2
            all inputs is a standard verification  > 1. Two expressions are equivalent in                   needed. For example, consider the 
            problem, and we can rely upon a  this case if e (0, 1) = e (0, 1). The enu-                     grammar for the set Exp  of linear 
                                                                           1          2                                                     2
            mature verification technology such  merator starts by listing expressions  expressions with conditionals, the 
                                                        5   of size 1 one by one. The first expres-         algorithm needs to enumerate 
            as SMT solvers for this purpose.
            Learning an expression from the set  sion considered is x. It is added to the                   (inequivalent) expressions generated 
            Exp of candidate expressions that sat-          list, and since it does not satisfy the         by both non-terminals T and C con-
            isfies the specification for the current        specification, the search continues.  currently by employing a dynamic 
                                                                                                                                                        2 
            inputs in Examples is a new challenge,          The next expression is y, which is  programming strategy (see Alur et al.  
                                                                                                                                32).
            and has been the focus of research in           inequivalent to x and does not satisfy          and Udupa et al.
            design and implementation of SyGuS              the specification, so is added to the 
            solvers.                                        list and the search continues. The  An Infrastructure for Solvers
               Enumerative search. Given a set  next expression is 0, which turns out                       In the world of constraint solving, the 
            Exp of candidate expressions speci-             to be equivalent to x (both evaluate to         standardization of the input format, 
            fied by a (context-free) grammar, a  0 for the input (0, 1) ), and is hence dis-                collection and categorization of a 
            finite set Examples of inputs, and a  carded. The next expression is 1,  large number of benchmarks, access 
            logical specification Spec, the learn-          which is also discarded as it is equiva-        to open-source computational infra-
            ing problem is to find an expression e          lent to y. Next the algorithm considers         structure, and organization of an 
            in Exp such that Spec[f/e] is satisfied         the expressions generated by the  annual competition of solvers, had a 
            for all inputs in Examples.  application of the rule E + E. The algo-                           transformative impact on both the 
            Furthermore, we want to find the sim-           rithm considers only x and y as poten-          development of powerful computa-
            plest such expression.                          tial subexpressions at this step, and  tional techniques and the practical 
                                                                                                                                                        5 
               The simplest solution to the  thus, examines only x + x, x + y, y + x,                       applications to diverse problems.
                                                                                         DECEMBER 2018 |  VOL. 61  |  NO. 12  |  COMMUNICATIONS OF THE ACM    89
     review articles
          This success inspired us to initiate a     mentioned previously. This means  invariant, typically using linear arith-
          similar effort centered on the SyGuS       that once the learner returns a candi-      metic with conditionals, leads to 
          problem (see www.sygus.org).               date expression e, the verifier needs to    benchmarks for SyGuS solvers.
             Standardized input format. To  check the truth of Spec[f/e] with all                   The string category of benchmarks 
          define a standardized input format  the variables universally quantified.  consists of tasks that require learning 
          for SyGuS, a natural starting point is     This amounts to checking the satisfi-       programs to manipulate strings based 
          the input format used by SMT solvers       ability of the quantifier-free formula ¬    on regular expressions and come 
          for two reasons. First, there is already   Spec[f/e], a task for which contempo-       from the public set of benchmarks of 
          a vibrant ecosystem of benchmarks,  rary SMT solvers are particularly  the FlashFill system (and its succes-
          solvers, users, and researchers com-       effective.                                  sors). These benchmarks are based on 
          mitted to the SMT format. Second, a           The format allows specifying syn-        the newly supported theory SLIA in 
          typical SyGuS solution strategy (see  thesis of multiple unknown functions             SMT-LIB, which supports string oper-
          Figure 1) needs to verify that a candi-    simultaneously. It also allows the use      ations such as prefix, suffix, sub-
          date solution satisfies the logical con-   of  let expressions in the grammar  string, length, and indexing.
          straint, and the ability to use a  rules. Such expressions can make syn-                  The other sources of benchmarks  
          standard SMT solver as a verifier is a     thesized solutions succinct, and are  include motion planning for robot  
          big win.                                   analogous to the use of auxiliary vari-     movements, the 2013 ICFP Program-
                                                                                                                     1 that included syn-
             The SyGuS input format SYNTH-           ables in imperative code.                   ming Competition
          LIB thus extends the format SMT-              Benchmarks. The benchmarks we  thetic but challenging bitvector 
          LIB2 for specifying logical constraints.   have collected come from different  functions, program repair for intro-
          This means that to define a problem,       domain areas, use different SMT log-        ductory programming solutions and 
          we must first choose one of the stan-      ics, and different grammars. There  real-world programs,15 compiler opti-
          dard SMT logics. An example is LIA  are currently over 1,500 benchmarks.               mization, and synthesis of crypto-
          that can encode formulas in linear  We give a few examples for bench-                  graphic circuits that are resilient to 
                                                                                                                 7 (as we will detail later).
          arithmetic with conditionals (essen-       mark categories.                            timing attacks
          tially same as the set of expressions in      The  hacker’s delight benchmarks            SyGuS-Comp: a competition of 
          the set Exp ). Other commonly used  are concerned with bit-manipulation                solvers. In order to encourage the 
                      2
          logics for our purpose include BV for      problems from the book Hacker’s  development of solvers for the SyGuS 
          manipulating bit-vectors, LRA for lin-              33 These benchmarks were  problem we initiated a competition of 
                                                     Delight.
          ear arithmetic over reals, and SLIA for    among the first to be successfully  solvers called SyGuS-Comp. The solv-
                                                                                         12,13,29
          processing strings.                        tackled by synthesis technology.            ers are compared on the basis of the 
             Once a logic is chosen, the problem     Each such problem induces several  number of benchmarks solved, the 
          definition next declares the name of       benchmarks with varying grammars.  time taken to solve, and the size of the 
          the function to be synthesized along       The grammar in the easiest instances        generated expressions. The first com-
          with the types of the input arguments      includes only the operators that are  petition was held in 2014, and is now 
          and output value. These types must be      required to implement the desired  an annual event, co-located with the 
          from the underlying theory, for  transformations, whereas the gram-                    annual Computer Aided Verification 
          instance, boolean and integer types  mar in the hardest instances is highly            Conference (CAV). The Star-Exec plat-
          are possible in LIA. The function dec-     unconstrained, so the synthesizer  form provides the computational 
          laration also specifies the grammar  must discover which operators to use              infrastructure needed for the 
          for defining the set Exp of candidate      in addition to how to compose them                        31
                                                                                                 competition.
          expressions. This simply includes a  together.                                            The first competition consisted of 
          list of typed nonterminals, including         SV-COMP is a competition of auto-        a single track. The benchmarks in this 
          the special nonterminal Start, and a       mated tools for software verification       track used the SMT logics LIA (condi-
          list of productions for each of them.      held annually in conjunction with  tional linear arithmetic) and BV (bit-
          The terminals in the grammar rules  ETAPS (European Joint Conferences   vectors), and each benchmark 
          must be the symbols from the under-        on Theory and Practice of Software).        provided its own context-free gram-
          lying logic used in a type-consistent  In this competition, the verifier is  mar to be used in the solution. The 
          manner. The unknown function itself        tasked with checking correctness  second competition consisted of 
          cannot occur in the rules, meaning  requirements (such as assertions) of  three tracks: the general track that is 
          that we do not support synthesis of  C programs. When the program to be                same as the single track of the first 
          recursively defined functions in the  verified contains loops, this requires           competition,  the CLIA track where 
          current version.                           inference of an inductive loop invari-      logic is LIA and the grammar admits 
             The logical constraint Spec is speci-   ant. Research on automated synthesis        every LIA expression, and the INV track 
          fied as a formula that is built from the   of invariants has used benchmarks of        aimed at benchmarks for synthesis of 
          operations in the chosen logic and  SV-COMP by converting fragments of                 loop invariants. This track is a restric-
          invocations of the function to be syn-     C programs to logical formulas corre-       tion of the CLIA track, which consists 
                                                                                             8   of special syntactic sugaring of SyGuS 
          thesized. In the current version, we  sponding to verification conditions.
          require this formula to be free of  Augmenting these benchmarks with a                 problems, to allow direct encoding of 
          quantifiers as is the case in examples     syntactic template for the unknown  inference of inductive invariants. The 
          90    COMMUNICATIONS OF THE ACM   |  DECEMBER 2018  |  VOL. 61  |  NO. 12
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 review articles
                                                                                                                           third and fourth competitions con-                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             the maximum of two numbers using 
                                                                                                                           sisted, in addition to these three                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             the grammar Exp . For any number n, 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   3
                                                                                                                           tracks, the PBE track for programming                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          we can similarly write a specification 
                                                                                                                           by examples. The PBE track restricts                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           for computing the maximum of n 
                                                                                                                           semantic constraints to be based  The formalization of  input arguments. In the first competi-
                                                                                                                           upon only input–output examples.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               tion all solvers were able to solve for n 
                                                                                                                           This track is divided into two: bench-                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 the SyGuS problem                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       = 2, only one solver was able to solve 
                                                                                                                           marks using the BV logic, and bench-                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   and organization                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        for n = 3 and none could solve for n = 4. 
                                                                                                                           marks manipulating strings                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     The 2017 solvers are capable of solv-
                                                                                                                           expressed in the SLIA logic.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           of the annual                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           ing for n ≤ 21. Note that the size of the 
                                                                                                                                                              The ESolver based on the enumera-                                                                                                                                                                                                                                                                                                                                                                                                                                                   competition of                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          minimal expression grows quadrati-
                                                                                                                           tive search strategy described previ-                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          cally with n. The size of the expression 
                                                                                                                           ously won the first competition. Since                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 solvers has been                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        generated for n = 21 is 1621. With 
                                                                                                                           then a number of researchers have                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              regard to the time to solve these 
                                                                                                                           proposed new solution strategies. For                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  a catalyst for                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          benchmarks, instances with n ≤ 10 
                                                                                                                           instance, the ICE-DT solver is special-                                                                                                                                                                                                                                                                                                                                                                                                                                                                                research in search-                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     are solved within 5s, whereas the solu-
                                                                                                                           ized to learning invariants based on a                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         tion for n = 21 required 2100 s.
                                                                                                                           novel idea of generalizing from impli-                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 based program                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              Trying to understand which SyGuS 
                                                                                                                           cation counterexamples (as opposed  synthesis.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 instances are easily solved by current 
                                                                                                                           just positive and negative examples                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            SyGuS solvers, we recall different 
                                                                                                                           common in classical learning), and                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             aspects of a SyGuS instance: (i) The 
                                                                                                                           won the INV track in recent competi-                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           grammar can be very general or very 
                                                                                                                           tions,8 and the strategy to solve alter-                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       restrictive, depending on the size of 
                                                                                                                           nation of quantifiers within the SMT                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           the set of syntactically allowed expres-
                                                                                                                           solver CVC4 was modified to produce                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            sions. (ii) The specification can 
                                                                                                                           witness functions that match the syn-                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          require a single or multiple functions 
                                                                                                                           tactic template leading to a SyGuS                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             to be simultaneously synthesized. (iii) 
                                                                                                                           solver that is the most effective cur-                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         The specification can be complete or 
                                                                                                                           rent solver for the CLIA and PBE-                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              partial depending on whether the set 
                                                                                                                                                                                                                                                                                                              25 The winner of the 
                                                                                                                           String tracks.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 of semantic solutions is a singleton or 
                                                                                                                           general track in the 2017 competition                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          not. (iv) The grammar may or may not 
                                                                                                                           is EUSolver, which we will explore.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            allow the use of let for specifying 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          auxiliary variables. (v) When the spec-
                                                                                                                           State of the Art                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               ification has several invocations of 
                                                                                                                           The formalization of the SyGuS prob-                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           the function to be synthesized, all 
                                                                                                                           lem and organization of the annual                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             invocations may be exactly the same 
                                                                                                                           competition of solvers has been a cat-                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         (in the sense that the sequence of 
                                                                                                                           alyst for research in search-based pro-                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        parameters is the same in all) or there 
                                                                                                                           gram synthesis. We first give an                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               may be different ways in which the 
                                                                                                                           overview of the progress in solver                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             function is invoked. We refer to the 
                                                                                                                           technology, then describe the solu-                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            former as single invocation and to the 
                                                                                                                           tion strategy employed by the current                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          latter as multiple invocation.25 The cat-
                                                                                                                           winner, and explain a novel applica-                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           egories of benchmarks in which state-
                                                                                                                           tion of SyGuS to synthesis of crypto-                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          of-the-art solvers excel are those with 
                                                                                                                           graphic circuits resistant to timing                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           a single function invocation, a single 
                                                                                                                           attacks.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       function to synthesize, a complete 
                                                                                                                                                              Evolution of SyGuS solvers. The                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             specification, no use of let, and a 
                                                                                                                           cap abilities of SyGuS solvers are                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             restricted grammar. Benchmarks of 
                                                                                                                           improving from competition to com-                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             the CLIA and invariant generation 
                                                                                                                           petition. For instance, all instances of                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       tracks are also easily handled by cur-
                                                                                                                           the ICFP benchmarks were solved in                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             rent solvers, in spite of their grammar 
                                                                                                                           2017 competition, most in less than                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            being general.
                                                                                                                           10 seconds. In contrast, none of these                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            Enumerative search with decision 
                                                                                                                           were solved in the first competition,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          trees. When the grammar specifying 
                                                                                                                           and in the original ICFP competition,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          the set of allowed expressions 
                                                                                                                           some of these benchmarks were                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  includes conditionals, the desired 
                                                                                                                           solved by the participants using enor-                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         solution is typically a tree whose inter                                                                                                                                                                                                                                                                                                                                                                                                                                     -
                                                                                                                           mously large compute clusters.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 nal nodes are labeled with tests used 
                                                                                                                                                              As another example, recall the                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              in conditionals and leaves are labeled 
                                                                                                                           example given earlier of synthesizing                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          with test-free expressions. The key 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                DECEMBER 2018 |  VOL. 61  |  NO. 12  |  COMMUNICATIONS OF THE ACM    91
     review articles
         idea behind the optimization to the                                                 while the partial solution x works for 
         enumerative search employed by the                                                  all inputs in Examples0. Thus, the 
         2017 winning solver, EUSolver, is to                                                learner can return ITE( (x ≤ y), y, x) as 
         find expressions suitable as labels in                                              a candidate expression.
         the desired tree by enumeration, and      The categories                              In general, consider a set Examples 
         construct the desired tree using the                                                of inputs, a set L of terms enumerated 
         well-studied heuristic for decision  of benchmarks                                  so far, and a set P of conditional tests 
         tree learning from machine learning                                                 enumerated so far. Suppose the terms 
                    20,23                          in which  
         literature.    We will illustrate the                                               in L cover all inputs, that is, for each 
         mechanics of this algorithm, and why      state-of-the-art                          input in Examples, there is at least one 
         its performance is superior to the  solvers excel                                   term in L, which satisfies the specifi-
         enumerative search, using the logical                                               cation for this input. The computa-
         specification Spec  and the set Exp  of                                             tional problem is now to construct a 
                            1                2     are those with  
         conditional linear expressions. Recall                                              conditional expression with tests in P 
         that the correct solution to this syn-    a single function                         and leaf expressions in L. A natural 
         thesis problem is the expression  invocation,                                       recursive algorithm to construct the 
         ITE( (x ≤ y), y, x), which corresponds                                              decision tree is to first choose a test p 
         to an expression tree of size 6. The  a single function                             in P, learn a conditional expression e1 
                                                                                                                     1 of inputs for 
         enumerative search algori thm thus  to synthesize,                                  for the subset Examples
         has to process all expressions of size 5                                            which the test p is true, learn a condi-
         or less that are inequivalent with  a complete                                      tional expression e0 for the subset 
                                                                                                      0 of inputs for which the test 
         respect to the current set Examples.      specification,                            Examples
            To understand the divide-and-con-                                                is false, and return ITE(p, e1, e0). The 
         quer strategy of EUSolver, let us  no use of let,                                   effectiveness of this algorithm, that 
         ignore the pruning based on                                                         is, how many tests the final expres-
         Examples-equivalence for now.                                                       sion contains, depends on how the 
                                                   and a restricted 
         Suppose the algorithm starts enu-         grammar.                                  splitting predicate p is chosen. The 
         merating expressions in Exp2 in                                                     construction of the desired tree can 
         increasing order of size, and checks                                                be formalized as a decision tree learn-
         for each one if it satisfies Spec  for all                                          ing problem: one can think of the 
                                         1
         inputs in the current set Examples.                                                 inputs in Examples as instances, 
         The expressions of size 1, namely, 0,                                               terms in L as labels where a data point 
         1,  x, and y, are considered first.                                                 is labeled with a term if the term satis-
         Suppose none of them satisfies the                                                  fies the specification for that input, 
         specification for all inputs in                                                     and tests in P as attributes. The greedy 
         Examples (this will be the case, for                                                heuristic for constructing a small 
         instance, if it contains both (0, 1) and                                            decision tree selects a test p as the 
         (1, 0) ). However, no matter what                                                   first decision attribute if it leads to the 
         inputs belong to Examples, one of the                                               maximum information gain among 
         terms x or y satisfies the specification                                            all possible tests, where the gain is 
         for every input in Examples. In other                                               calculated from the so-called entropy 
                                                                                                                 1              0
         words, the terms x and y cover the cur-                                             of the sets Examples  and Examples  of 
         rent set, and can be viewed as partial                                              data points as split by the attribute p.
         solutions. If such partial solutions                                                  The idea of considering only those 
         can be combined using conditional                                                   terms and tests that are inequivalent 
         tests, then this can already yield a                                                with respect to current inputs is 
         solution that satisfies all inputs in                                               orthogonal to the above divide-and-
         Examples without enumerating terms                                                  conquer strategy, and can be inte-
         of larger sizes. The EUSolver consists                                              grated in it.
         of a module that enumerates predi-                                                    Repairing cryptographic circuits. 
         cates (that is, tests used in condition-                                            Con sider a circuit C with a set I0 of pri-
         als) concurrently in increasing size.                                               vate inputs and a set I1 of public inputs 
         The test (x ≤ y) is a predicate of small-                                           such that if an attacker changes the 
         est possible size.                                                                  values of the public inputs and 
            Given such a test, the set of inputs                                             observes the corresponding output, 
         divides naturally into two sets,                                                    she is unable to infer the values of the 
                   1 for which the test is true                                              private inputs (under standard 
         Examples
                        0 for which the test is 
         and Examples                                                                        assumptions about computational 
         false. Observe that the partial solu-                                               resources in cryptography). The pri-
                                               1 
         tion y works for all inputs in Examples                                             vate inputs can correspond to a user’s 
         92    COMMUNICATIONS OF THE ACM   |  DECEMBER 2018  |  VOL. 61  |  NO. 12
                                                                                                                                                                             review articles
                secret key, the public inputs can cor-                         lengths compared to the manually                                    In Proc. ICSE, 2010, 215–224.
                respond to a message, and the output                           constructed one in the work of Ghalaty                         14.  Kuncak, V., Mayer, M., Piskac, R., Suter, P. Software 
                                                                                                                                                   synthesis procedures. Commun. ACM, 55, 2.
                                                                                      9                                                       15.  Le, X.D., Chu, D., Lo, D., Le Goues, C., Visser, W. S3: 
                can be the encryption of the message                           et al.
                using the secret key. Such crypto-                                                                                                 Syntax- and semantic-guided repair synthesis via 
                                                                                                                                                   programming by examples. In Proc. FSE, 2017, 
                graphic circuits are commonplace in                            Conclusion                                                          593–604.
                encryption systems used in practice.                           Search-based program synthesis pro-                            16.  Malik, S., Zhang, L. Boolean satisfiability: From 
                                                                                                                                                   theoretical hardness to practical success. Commun. 
                One possible attack, that is, a strategy                       mises to be a useful tool for future                                ACM, 52, 8 (2009), 76–82.
                for the attacker to gain information  program development environments.                                                       17.  Manna, Z., Waldinger, R. Fundamentals of deductive 
                                                                                                                                                   program synthesis. IEEE Trans. Softw. Eng. 18, 8 
                about the private inputs despite the  Programming by examples in domain-                                                           (1992), 674–704.
                established logical correctness of the                         specific applications and semantics-                           18.  Massalin, H. Superoptimizer – A look at the smallest 
                                                                                                                                                   program. In Proc. ASPLOS, 1987, 122–126.
                circuit, is based on measuring the  preserving optimization of program  19.  Mechtaev, S., Yi, J., Roychoudhury, A. Angelix: 
                time it takes for the circuit to com-                          fragments to satisfy performance                                    Scalable multiline program patch synthesis via 
                                                                                                                                                   symbolic analysis. In Proc. ICSE, 2016, 691–701.
                pute. For instance, when a public  goals expressed via syntactic criteria  20.  Mitchell, T. Machine Learning. McGraw-Hill, 1997.
                input bit changes from 1 to 0, a spe-                          are already proving to be its interest-                        21.  Osera, P., Zdancewic, S. Type-and-example-directed 
                                                                                                                                                   program synthesis. In Proc. PLDI, 2015, 619–630.
                cific output bit is guaranteed to  ing applications. Our experience  22.  Polikarpova, N., Kuraj, I., Solar-Lezama, A. Program 
                                                                                                                                                   synthesis from polymorphic refinement types. In 
                change from 1 to 0 independent of  shows that investing in the infrastruc-                                                         Proc. PLDI, 2016, 522–538.
                whether a particular private input bit                         ture—standardized input formats,  23.  Quinlan, J. Introduction to decision trees. Mach. 
                is 0 or 1, but may change faster when                          collection of benchmarks, open-                                     Learn. 1, 1 (1986), 81–106.
                                                                                                                                              24.  Raychev, V., Vechev, M.T., Yahav, E. Code completion 
                this private input is 0, thus leaking  source prototype solvers, and a com-                                                        with statistical language models. In Proc. PLDI, 2014, 
                information. Such vulnerabilities do  petition of solvers—has been vital in                                                        419–428.
                                                                                                                                              25.  Reynolds, A., Deters, M., Kuncak, V., Tinelli, C., Barrett, 
                occur in practice, and in fact, Ghalaty                        advancing the state of the of art.                                  C.W. Counterexample-guided quantifier instantiation 
                                                                                                                                                   for synthesis in SMT. In Proc. CAV, 2015, 198–216.
                et al.9 reports such an attack on a cir-                       Finally, improving the scalability of  26.  Schkufza, E., Sharma, R., Aiken, A. Stochastic program 
                cuit used in the AES encryption stan-                          SyGuS solvers is an active area of cur-                             optimization. Commun. ACM 59, 2 (2016), 114–122.
                                                                                                                                              27.  Seshia, S.A. Combining induction, deduction, and 
                dard. The timing attack is not possible                        rent research, and in particular, a                                 structure for verification and synthesis. Proc. IEEE 
                if the circuit meets the so-called struc-                      promising research direction is to                                  103, 11 (2015), 2036–2051.
                                                                                                                                              28.  Solar-Lezama, A. Program sketching. STTT 15, 5–6 
                tural property of being constant time:                         explore how these solvers can benefit                               (2013), 475–495.
                A constant-time circuit is the one in                          from modern machine learning tech-                             29.  Solar-Lezama, A., Rabbah, R., Bodík, R., Ebcioglu, K. 
                                                                                                                                                   Programming by sketching for bit-streaming 
                which the length of all input-to-out-                          nology (see, for example, Devlin                                    programs. In Proc. PLDI, 2005, 281–294.
                put paths measured in terms of num-                                    6 for the use of neural networks                       30.  Srivastava, S., Gulwani, S., Foster, J.S. Template-
                                                                               et al.                                                              based program verification and program synthesis. 
                ber of gates are the same. After  for learning programs from input-to-                                                             STTT 15, 5–6 (2013), 497–518.
                identifying the attack, Ghalaty et al.9                        output examples).                                              31.  Stump, A., Sutcliffe, G., Tinelli, C. Starexec: A 
                                                                                                                                                   cross-community infrastructure for logic solving. In 
                shows how to convert the given circuit                                                                                             Proc. IJCAR, 2014, 367–373.
                to an equivalent constant-time circuit                                                                                        32.  Udupa, A., Raghavan, A., Deshmukh, J., Mador-Haim, S., 
                                                                               References                                                          Martin, M., Alur, R. TRANSIT: Specifying protocols 
                by introducing delay elements on  1.  Akiba, T., Imajo, K., Iwami, H., Iwata, Y., Kataoka, T.,                                     with concolic snippets. In Proc. PLDI, 2013, 287–296.
                shorter paths.                                                      Takahashi, N., Mmoskal, M., Swamy, N. Calibrating         33.  Warren, H.S. Hacker’s Delight. Addison-Wesley, 2002.
                                                                                    research in program synthesis using 72,000 hours 
                                                                         7          of programmer time. Technical Report,  
                    As noted in the work of Eldib et al.,                           MSR, 2013.                                                Rajeev Alur is the Zisman Family Professor in the 
                being constant-time is a syntactic  2.  Alur, R., Bodík, R., Juniwal, G., Martin, M.M.K.,                                     Department of Computer and Information Sciences at the 
                constraint on the logical representa-                               Raghothaman, M., Seshia, S.A., Singh, R.,                 University of Pennsylvania, Philadelpha, PA, USA.
                                                                                    Solar-Lezama, A., Torlak, E., Udupa, A.  
                tion of a circuit, that is, it depends on                           Syntax-guided synthesis. In Proc. FMCAD,                  Rishabh Singh is a research scientist at Google Brain, 
                the structure of the expression and                                 2013, 1–17.                                               Mountain View, CA, USA.
                not on the operators used in the con-                          3.   Alur, R., Radhakrishna, A., Udupa, A. Scaling             Dana Fisman is a senior lecturerat Ben Gurion University, 
                                                                                    enumerative program synthesis via divide and              Be’er Shera, Israel.
                struction. As a result, given a circuit C,                          conquer. In Proc. TACAS, LNCS 10205, 2017, 
                                                                                    319–336.                                                  Armando Solar-Lezama is an associate professor and 
                synthesizing another circuit C′ such  4.  Clarke, E., Grumberg, O., Peled, D. Model Checking.                                 leader of the Computer Assisted Programming Group at 
                that C′ is a constant-time circuit and is                           MIT Press, 2000.                                          MIT, Cambridge, MA, USA.
                                                                               5.   de Moura, L., Bjørner, N. Satisfiability Modulo Theories: 
                functionally equivalent to C can be                                 Introduction and applications. Commun. ACM 54, 9 
                formalized as a SyGuS problem. The                                  (2011), 69–77.
                                                                               6.   Devlin, J., Uesato, J., Bhupatiraju, S., Singh, R., Mohamed, 
                set of all constant-time circuits with                              A., Kohli, P. Robustfill: Neural program learning under 
                all input-to-output path lengths                                    noisy I/O. In Proc. ICML, 2017, 990–998.
                                                                               7.   Eldib, H., Wu, M., Wang, C. Synthesis of fault-attack 
                within a given bound can be expressed                               countermeasures for cryptographic circuits. In Proc. 
                using a context-free grammar and                                    CAV, LNCS 9780, 2016, 343–363.
                                                                               8.   Garg, P., Löding, C., Madhusudan, P., Neider, D. ICE: A 
                being logically equivalent to the origi-                            robust framework for learning invariants. In Proc. 
                nal circuit can be expressed as a                                   CAV, LNCS 8559, 2014, 69–87.
                                                                               9.   Ghalaty, N., Aysu, A., Schaumont, P. Analyzing and 
                Boolean formula involving the                                       eliminating the causes of fault sensitivity analysis.  
                                                            7 then use              In Proc. DATE, 2014, 1–6.
                unknown circuit. Eldib et al.                                  10.  Gulwani, S. Automating string processing in 
                the EUSolver to automatically synthe-                               spreadsheets using input–output examples. In Proc. 
                size constant-time circuits that are                                POPL, 2011, 317–330.
                                                                               11.  Gulwani, S., Harris, W.R., Singh, R. Spreadsheet data 
                logically equivalent to given crypto-                               manipulation using examples. Commun. ACM, 55, 8 
                graphic circuits, and in particular,                                (2012), 97–105.
                                                                               12.  Gulwani, S., Jha, S., Tiwari, A., Venkatesan, R. Synthesis 
                report a solution that is smaller in                                of loop-free programs. In Proc. PLDI, 2011, 62–73.
                                                                               13.  Jha, S., Gulwani, S., Seshia, S.A., Tiwari, A. 
                terms of overall size as well as path                               Oracle-guided component-based program synthesis.          ©2018 ACM 0001-0782/18/12 $15.00.
                                                                                                                    DECEMBER 2018 |  VOL. 61  |  NO. 12  |  COMMUNICATIONS OF THE ACM    93

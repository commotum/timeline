           227:2                                             Shraddha Barke, Hila Peleg, and Nadia Polikarpova
                                             Input                Output
                                              s             n
                                      "1/17/16-1/18/17"     1    "1/17/16"
                                      "1/17/16-1/18/17"     2    "1/18/17"
                                   "01/17/2016-01/18/2017"  1  "01/17/2016"
                                   "01/17/2016-01/18/2017"  2  "01/18/2017"
              Fig. 1. Input-output example specification for the pick-date benchmark (adapted from [eup 2018]).
           the search space grows astronomically large, and synthesis quickly becomes intractable, despite
           clever pruning strategies employed by state-of-the-art techniques.
             For example, consider the following solution to the pick-date problem introduced above, using
           the DSL of a popular synthesis benchmarking platform SyGuS [Alur et al. 2013]:
                      (substr s (indexof (concat "-" s) "-" (- n 1)) (indexof s "-" n))
           This solution extracts the correct substring of s by computing its starting index (indexof (concat
           "-" s) "-" (- n 1)) to be either zero or the position after the dash, depending on the value of
           n. At size 14, this is the shortest SyGuS program that satisfies the examples in Fig. 1. Programs
           of this complexity already pose a challenge to state-of-the art synthesizers: none of the SyGuS
                                                                                              1
           synthesizers we tried were able to generate this or comparable solution within ten minutes .
           Guidingsynthesiswithprobabilisticmodels.Apromisingapproachtoimprovingthescalability
           of synthesis is to explore more likely programs first. Prior work [Balog et al. 2016; Ellis et al. 2018;
           Lee et al. 2018; Menon et al. 2013] has proposed guiding the search using different types of learned
           probabilistic models. For example, if a model can predict, given the input-output pairs in Fig. 1, that
           indexof and substr are more likely to appear in the solution than other string operations, then the
           synthesizer can focus its search effort on programs with these operations and find the solution
           muchquicker. Making this approach practical requires solving two major technical challenges:
           (1) how to obtain a useful probabilistic model? and (2) how to guide the search given a model?
           Learning a model. Existing approaches [Bielik et al. 2016; Lee et al. 2018; Raychev et al. 2014]
           are able to learn probabilistic models of code automatically, but require significant amounts of
           high-quality training data, which must contain hundreds of meaningful programs per problem
           domain targeted by the synthesizer. Such datasets are generally difocult to obtain.
             To address this challenge, we propose just-in-time learning, a novel technique that learns a
           probabilistic context-free grammar (PCFG) for a given synthesis problem łjust in timež, i.e. during
           synthesis, rather than ahead of time. Previous work has observed [Peleg and Polikarpova 2020; Shi
           et al. 2019] that partial solutionsÐi.e. programs that satisfy a subset of input-output examplesÐ
           are often syntactically similar to the final solution. Our technique leverages this observation to
           collect partial solutions it encounters during search and update the PCFG on the fly, rewarding
           syntactic elements that occur in these programs. For example, when exploring the search space for
           the pick-date problem, unguided search quickly stumbles upon the short program (substr s 0
           (indexof s "-" n), which is a partial solution, since it satisfies two of the four input-output pairs
           (with n = 1). At this point, just-in-time learning picks up on the fact that indexof and substr seem
           to be promising operations to solve this problem, boosting their probability in the PCFG. Guided
           bytheupdatedPCFG,oursynthesizer finds the full solution in only 34 seconds.
           1CVC4[Reynoldsetal. 2019] is able to generate a solution within a minute, but its solution overfits to the examples and has
           size 73, which makes it hard to understand.
           Proc. ACMProgram. Lang., Vol. 4, No. OOPSLA, Article 227. Publication date: November 2020.
